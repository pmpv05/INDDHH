<%@page import="com.dogma.vo.*"%><%@page import="com.dogma.*"%><%@page import="java.util.*"%><%@include file="../../../../components/scripts/server/startInc.jsp" %><jsp:useBean id="dBean" scope="session" class="com.dogma.bean.query.TaskSchedulerMonitorBean"></jsp:useBean><%

TaskSchedulerVo selTaskSchVo = dBean.getTaskSchedulerVo();
boolean canQuery = "true".equals(request.getParameter("canQuery"));
%><%@page import="com.dogma.util.DogmaUtil"%><%@page import="com.dogma.vo.custom.TaskSchedulerHistMonitorVo"%><%@page import="com.st.util.DateUtil"%><HTML><head><%@include file="../../../../components/scripts/server/headInclude.jsp" %></head><body><%//Mostramos el filtro %><TABLE class="pageTop"><COL class="col1"><COL class="col2"><TR><TD><%=LabelManager.getName(labelSet,"titTskSchAudit")%></TD><TD></TD></TR></TABLE><div id="divContent"><form id="frmMain" name="frmMain" method="POST"><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtGenData")%></DIV><table class="tblFormLayout"><tr><td align="right" style="width:20%;" title="<%=LabelManager.getToolTip(labelSet,"lblScheduler")%>"><%=LabelManager.getNameWAccess(labelSet,"lblScheduler")%>:</td><td align="left"><select name="cmbTskSch" id="cmbTskSch" onchange="cmbTskSchChange()"><option value="0" <%=(selTaskSchVo==null)?"selected":"" %>></option><% Iterator itTskSched = dBean.getTaskSchedulers().iterator();
			    		   while (itTskSched.hasNext()){
							   	TaskSchedulerVo tskSchVo = (TaskSchedulerVo)itTskSched.next();%><option value="<%=tskSchVo.getTskSchId()%>"% <%=(selTaskSchVo!=null && selTaskSchVo.getTskSchId().intValue()==tskSchVo.getTskSchId().intValue())?"selected":"" %>><%=tskSchVo.getTskSchTitle()%></option><%}%></select></td></tr></table><%if (selTaskSchVo!=null){%><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtFil")%></DIV><table class="tblFormLayout"><tr><td align="right" style="width:20%;" title="<%=LabelManager.getToolTip(labelSet,"lblDateTskSchAudit")%>"><%=LabelManager.getNameWAccess(labelSet,"lblDateTskSchAudit")%>:</td><td><input type=text name="txtFch" p_calendar="true" class="txtDate" p_required="true" value="<%=(dBean.getFilterActDate()!=null && !"".equals(dBean.getFilterActDate()))?dBean.getFilterActDate():""%>" p_mask="<%=DogmaUtil.getHTMLDateMask(dBean.getEnvId(request))%>" size="10" maxlength="10" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblDateTskSchAudit")%>" <%if(selTaskSchVo==null){%>disabled<%}%>><input type=text name="txtHor" maxlength=5 size=5 p_mask="<%=DogmaUtil.getHTMLTimeMask()%>" value="<%=(dBean.getFilterActHour()!=null && !"".equals(dBean.getFilterActHour()))?dBean.getFilterActHour():""%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblTime")%>" <%if(selTaskSchVo==null){%>disabled<%}%> ></td><td></td><td></td></tr><tr><td align="right" style="width:20%;" title="<%=LabelManager.getToolTip(labelSet,"lblOpDateBetween")%>"><%=LabelManager.getNameWAccess(labelSet,"lblOpDateBetween")%>:</td><td><input type=text name="txtFchFrom" p_calendar="true" class="txtDate" value="<%=(dBean.getFilterDateFrom()!=null && !"".equals(dBean.getFilterDateFrom()))?dBean.getFilterDateFrom():""%>" p_mask="<%=DogmaUtil.getHTMLDateMask(dBean.getEnvId(request))%>" size="10" maxlength="10" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblActDate")%>" <%if(selTaskSchVo==null){%>disabled<%}%>><input type=text name="txtHorFrom" maxlength=5 size=5 p_mask="<%=DogmaUtil.getHTMLTimeMask()%>" value="<%=(dBean.getFilterHourFrom()!=null && !"".equals(dBean.getFilterHourFrom()))?dBean.getFilterHourFrom():""%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblTime")%>" <%if(selTaskSchVo==null){%>disabled<%}%> >
					   	-
					   	<input type=text name="txtFchTo" p_calendar="true" class="txtDate" value="<%=(dBean.getFilterDateTo()!=null && !"".equals(dBean.getFilterDateTo()))?dBean.getFilterDateTo():""%>" p_mask="<%=DogmaUtil.getHTMLDateMask(dBean.getEnvId(request))%>" size="10" maxlength="10" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblActDate")%>" <%if(selTaskSchVo==null){%>disabled<%}%>><input type=text name="txtHorTo" maxlength=5 size=5 p_mask="<%=DogmaUtil.getHTMLTimeMask()%>" value="<%=(dBean.getFilterHourTo()!=null && !"".equals(dBean.getFilterHourTo()))?dBean.getFilterHourTo():""%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblTime")%>" <%if(selTaskSchVo==null){%>disabled<%}%> ></td><td align="right" style="width:20%;" title="<%=LabelManager.getToolTip(labelSet,"lblUsu")%>"><%=LabelManager.getNameWAccess(labelSet,"lblUsu")%>:</td><td><input type=text name="txtUsr" value="<%=(dBean.getFilterUser()!=null && !"".equals(dBean.getFilterUser()))?dBean.getFilterUser():""%>" size="20" maxlength="10" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblUsu")%>" <%if(selTaskSchVo==null){%>disabled<%}%>></td></tr></table><table class="tblFormLayout"><tr style="width=100%"><td></td><td align="right"><button type="button" onclick="btnSearch_click()" title="<%=LabelManager.getToolTip(labelSet,"btnBus")%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnBus")%>"><%=LabelManager.getNameWAccess(labelSet,"btnBus")%></button><button type="button" onclick="btnReset_click()" title="<%=LabelManager.getToolTip(labelSet,"btnRes")%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnRes")%>"><%=LabelManager.getNameWAccess(labelSet,"btnRes")%></button></td></tr></table><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtUpdHistoric")%></DIV><div type="grid" id="gridList" style="height:<%=Parameters.SCREEN_LIST_SIZE%>px"><table  width="500px" cellpadding="0" cellspacing="0"><thead><tr><th style="width:0px;display:none;" title="<%=LabelManager.getToolTip(labelSet,"lblSel")%>"></th><th min_width="100px" style="min-width:100px;width:70%" title="<%=LabelManager.getToolTip(labelSet,"lblOp")%>"><%=LabelManager.getName(labelSet,"lblOp")%></th><th min_width="100px" style="width:100px" title="<%=LabelManager.getToolTip(labelSet,"lblHorRange")%>"><%=LabelManager.getName(labelSet,"lblHorRange")%></th><th min_width="150px" style="width:150px" title="<%=LabelManager.getToolTip(labelSet,"lblAsigDisp")%>"><%=LabelManager.getName(labelSet,"lblAsigDisp")%></th><th min_width="100px" style="min-width:100px;width:30%" title="<%=LabelManager.getToolTip(labelSet,"lblUsu")%>"><%=LabelManager.getName(labelSet,"lblUsu")%></th><th min_width="150px" style="width:150px" title="<%=LabelManager.getToolTip(labelSet,"lblOpDate")%>"><%=LabelManager.getName(labelSet,"lblOpDate")%></th></tr></thead><tbody><% Iterator itHistoric = dBean.getTaskSchedulerHistory().iterator();
				   			   int i=0;
				   			   while (itHistoric.hasNext()){
				   			   		TaskSchedulerHistMonitorVo tskSchHistVo = (TaskSchedulerHistMonitorVo) itHistoric.next();
				   			   		%><tr><td  style="width:0px;display:none;"><input type="hidden" id="idSel" name="chkSel<%=i%>"></td><td style="min-width:100px"><%=dBean.fmtHTML(tskSchHistVo.getOp())%></td><td><%=dBean.fmtHTML(tskSchHistVo.getRangoHor())%></td><td><%=dBean.fmtHTML(tskSchHistVo.getDisp())%></td><td style="min-width:100px"><%=dBean.fmtHTML(tskSchHistVo.getUser())%></td><td><%=tskSchHistVo.getRegDate()%></td></tr><%}%></tbody></table></div><%} %></form></DIV><TABLE class="pageBottom"><COL class="col1" /><COL class="col2" /><TR><TD align="right"><button type="button" onclick="btnExit_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnSal")%>" title="<%=LabelManager.getToolTip(labelSet,"btnSal")%>"><%=LabelManager.getNameWAccess(labelSet,"btnSal")%></button></TD></TR></TABLE></body></HTML><%@include file="../../../../components/scripts/server/endInc.jsp" %><script language='javascript' src='<%=Parameters.ROOT_PATH%>/programs/query/monitor/taskScheduler/taskSchAudit.js'></script>