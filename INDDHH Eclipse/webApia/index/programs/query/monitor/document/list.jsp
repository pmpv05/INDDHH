<%@page import="com.dogma.vo.*"%><%@page import="com.dogma.vo.filter.*"%><%@page import="com.dogma.bean.query.MonitorProcessesBean"%><%@page import="java.util.*"%><%@page import="com.dogma.util.DogmaUtil"%><%@include file="../../../../components/scripts/server/startInc.jsp" %><% boolean canOrderBy = false; %><HTML><head><%@include file="../../../../components/scripts/server/headInclude.jsp" %></head><body><jsp:useBean id="dBean" scope="session" class="com.dogma.bean.query.MonitorDocumentBean"></jsp:useBean><TABLE class="pageTop"><COL class="col1"><COL class="col2"><TR><TD><%=LabelManager.getName(labelSet,"titMonDoc")%></TD><TD></TD></TR></TABLE><DIV id="divContent" class="divContent"><form id="frmMain" name="frmMain" method="POST"><DIV class="subTit"><table width="100%"><tr class="subTit"><td width="100%" align="left"><%=LabelManager.getName(labelSet,"sbtFil")%></td><td align="right"><button type="button" id="toggleFilter" title="Ocultar/Mostrar el filtro" class="btn" onclick="toggleFilterSection(<%=Parameters.SCREEN_LIST_SIZE - Parameters.FILTER_LIST_SIZE%>,<%=(Parameters.SCREEN_LIST_SIZE)%>)"><img src="<%=Parameters.ROOT_PATH%>/styles/<%= styleDirectory %>/images/openToc.gif" width="8" height="7"></button></button></td></tr></table></DIV><DIV id="listFilterArea" style="display:none"><DIV style="OVERFLOW:AUTO;HEIGHT:<%= Parameters.FILTER_LIST_SIZE - 32 %>px;"><table class="tblFormLayout"><COL class="col1"><COL class="col2"><COL class="col3"><COL class="col4"><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblNom")%>"><%=LabelManager.getNameWAccess(labelSet,"lblNom")%>:</td><td><input name="txtName" maxlength="50" type="text" value="<%=dBean.fmtStr(dBean.getFilter().getDocName())%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblNom")%>"></td><td title="<%=LabelManager.getToolTip(labelSet,"lblDes")%>"><%=LabelManager.getNameWAccess(labelSet,"lblDes")%>:</td><td><input name="txtDesc" maxlength="50" type="text" value="<%=dBean.fmtStr(dBean.getFilter().getDocDesc())%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblDes")%>"></td></tr><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblTam")%>"><%=LabelManager.getNameWAccess(labelSet,"lblTam")%> (B):</td><td><input name="txtSizeFrom" maxlength="20" size="10" p_numeric="true" type="text" value="<%=dBean.fmtInt(dBean.getFilter().getDocSizeFrom())%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblTam")%>">
		   							-
		   							<input name="txtSizeTo" maxlength="20" size="10" p_numeric="true" type="text" value="<%=dBean.fmtInt(dBean.getFilter().getDocSizeTo())%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblTam")%>"></td><td title="<%=LabelManager.getToolTip(labelSet,"lblFrom")%>"><%=LabelManager.getNameWAccess(labelSet,"lblFrom")%>:</td><td><select name="selType" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblSize")%>" onchange="selType_change()"><option value="" <%= (dBean.getFilter().getDocType() == null)?"selected":""%>></option><option value="<%= DocumentVo.DOC_TYPE_TASK %>" <%= DocumentVo.DOC_TYPE_TASK.equals(dBean.getFilter().getDocType())?"selected":""%>><%= LabelManager.getName(labelSet,"lblTask") %></option><option value="<%= DocumentVo.DOC_TYPE_PROCESS %>" <%= DocumentVo.DOC_TYPE_PROCESS.equals(dBean.getFilter().getDocType())?"selected":""%>><%= LabelManager.getName(labelSet,"lblPro") %></option><option value="<%= DocumentVo.DOC_TYPE_PROCESS_INST %>" <%= DocumentVo.DOC_TYPE_PROCESS_INST.equals(dBean.getFilter().getDocType())?"selected":""%>><%= LabelManager.getName(labelSet,"lblProInst") %></option><option value="<%= DocumentVo.DOC_TYPE_BUS_ENT %>" <%= DocumentVo.DOC_TYPE_BUS_ENT.equals(dBean.getFilter().getDocType())?"selected":""%>><%= LabelManager.getName(labelSet,"lblBusEnt") %></option><option value="<%= DocumentVo.DOC_TYPE_BUS_ENT_INST %>" <%= DocumentVo.DOC_TYPE_BUS_ENT_INST.equals(dBean.getFilter().getDocType())?"selected":""%>><%= LabelManager.getName(labelSet,"lblBusEntInst") %></option><option value="<%= DocumentVo.DOC_TYPE_FORM %>" <%= DocumentVo.DOC_TYPE_FORM.equals(dBean.getFilter().getDocType())?"selected":""%>><%= LabelManager.getName(labelSet,"lblForm") %></option><option value="<%= DocumentVo.DOC_TYPE_BUS_ENT_INST_ATTRIBUTE %>" <%= DocumentVo.DOC_TYPE_BUS_ENT_INST_ATTRIBUTE.equals(dBean.getFilter().getDocType())?"selected":""%>><%= LabelManager.getName(labelSet,"lblBusEntInstAtt") %></option><option value="<%= DocumentVo.DOC_TYPE_PRO_INST_ATTRIBUTE %>" <%= DocumentVo.DOC_TYPE_PRO_INST_ATTRIBUTE.equals(dBean.getFilter().getDocType())?"selected":""%>><%= LabelManager.getName(labelSet,"lblProInstAtt") %></option><option value="<%= DocumentVo.DOC_TYPE_ENVIRONMENT %>" <%= DocumentVo.DOC_TYPE_ENVIRONMENT.equals(dBean.getFilter().getDocType())?"selected":""%>><%= LabelManager.getName(labelSet,"lblAmb") %></option></select></td></tr><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblTit")%>"><%=LabelManager.getNameWAccess(labelSet,"lblTit")%>:</td><td><input name="txtRelTitle" maxlength="50" type="text" class="txtReadOnly" value="<%=dBean.fmtStr(dBean.getFilter().getOwnerName())%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblTit")%>"></td><td title="<%=LabelManager.getToolTip(labelSet,"lblMonInstProNroReg")%>"><%=LabelManager.getNameWAccess(labelSet,"lblMonInstProNroReg")%>:</td><td><input name="txtRelNamePre" class="txtReadOnly" maxlength="50" size="5" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblMonInstProNroReg")%>" type="text" value="<%=dBean.fmtStr(dBean.getFilter().getOwnerNamePre())%>"><input name="txtRelNameNum" class="txtReadOnly" maxlength="11" size="7" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblMonInstProNroReg")%>" type="text" value="<%=dBean.fmtInt(dBean.getFilter().getOwnerNameNum())%>" class="txtNumeric"><input name="txtRelNamePos" class="txtReadOnly" maxlength="50" size="5"accesskey="<%=LabelManager.getAccessKey(labelSet,"lblMonInstProNroReg")%>" type="text" value="<%=dBean.fmtStr(dBean.getFilter().getOwnerNamePos())%>"></td></tr><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblUsu")%>"><%=LabelManager.getNameWAccess(labelSet,"lblUsu")%>:</td><td><input name="txtUser" maxlength="50" type="text" value="<%=dBean.fmtStr(dBean.getFilter().getDocUser())%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblUsu")%>"></td><td title="<%=LabelManager.getToolTip(labelSet,"lblFecUpl")%>"><%=LabelManager.getNameWAccess(labelSet,"lblFecUpl")%>:</td><td><input name="txtCreate" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblFecUpl")%>" class="txtDate" size="10" p_mask="<%=DogmaUtil.getHTMLDateMask(dBean.getEnvId(request))%>" p_calendar="true" maxlength="10" type="text" value="<%=dBean.fmtDate(dBean.getFilter().getDocCreate())%>"></td></tr><% if (Parameters.DOC_INDEX_ACTIVE) { %><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblContent")%>"><%=LabelManager.getNameWAccess(labelSet,"lblContent")%>:</td><td colspan="3"><input name="txtContent" maxlength="255" size="80" type="text" value="<%=dBean.fmtStr(dBean.getFilter().getDocContent())%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblContent")%>"></td></tr><% } %></table></div><table class="tblFormLayout"><COL class="col1"><COL class="col2"><COL class="col3"><COL class="col4"><tr><td></td><td colspan=3 align="right"><button type="button" onclick="btnSearch_click()" title="<%=LabelManager.getToolTip(labelSet,"btnBus")%>" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnBus")%>"><%=LabelManager.getNameWAccess(labelSet,"btnBus")%></button></td></tr></table></DIV><!--     ---------------------------------------------               --><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtRes")%></DIV><div type="grid" fastGrid="true" id="gridList" style="height:<%=Parameters.SCREEN_LIST_SIZE%>px" multiSelect="false"><table width="500px" cellpadding="0" cellspacing="0"><thead><tr><% canOrderBy = false; //dBean.getFilter().getOrderBy() != MonitorDocumentFilterVo.ORDER_NAME; %><th min_width="100px" style="min-width:100px;width:30%<% if (canOrderBy) {%>;cursor:hand" onclick="orderBy('<%=MonitorDocumentFilterVo.ORDER_NAME%>')<%}%>" title="<%=LabelManager.getToolTip(labelSet,"lblNom")%>"><%=canOrderBy?"<u>":""%><%=LabelManager.getName(labelSet,"lblNom")%><%=canOrderBy?"</u>":""%></th><% canOrderBy = false; //dBean.getFilter().getOrderBy() != MonitorDocumentFilterVo.ORDER_DESC; %><th min_width="100px" style="min-width:100px;width:70%<% if (canOrderBy) {%>;cursor:hand" onclick="orderBy('<%=MonitorDocumentFilterVo.ORDER_DESC%>')<%}%>" title="<%=LabelManager.getToolTip(labelSet,"lblDesc")%>"><%=canOrderBy?"<u>":""%><%=LabelManager.getName(labelSet,"lblDes")%><%=canOrderBy?"</u>":""%></th><% canOrderBy = false; //dBean.getFilter().getOrderBy() != MonitorDocumentFilterVo.ORDER_SIZE; %><th min_width="50px" style="width:50px<% if (canOrderBy) {%>;cursor:hand" onclick="orderBy('<%=MonitorDocumentFilterVo.ORDER_SIZE%>')<%}%>" title="<%=LabelManager.getToolTip(labelSet,"lblTam")%>"><%=canOrderBy?"<u>":""%><%=LabelManager.getName(labelSet,"lblTam")%><%=canOrderBy?"</u>":""%></th><% canOrderBy = false; //dBean.getFilter().getOrderBy() != MonitorDocumentFilterVo.ORDER_TYPE; %><th min_width="100px" style="width:100px<% if (canOrderBy) {%>;cursor:hand" onclick="orderBy('<%=MonitorDocumentFilterVo.ORDER_TYPE%>')<%}%>" title="<%=LabelManager.getToolTip(labelSet,"lblFrom")%>"><%=canOrderBy?"<u>":""%><%=LabelManager.getName(labelSet,"lblFrom")%><%=canOrderBy?"</u>":""%></th><% canOrderBy = false; //dBean.getFilter().getOrderBy() != MonitorDocumentFilterVo.ORDER_USER; %><th min_width="70px" style="width:70px<% if (canOrderBy) {%>;cursor:hand" onclick="orderBy('<%=MonitorDocumentFilterVo.ORDER_USER%>')<%}%>" title="<%=LabelManager.getToolTip(labelSet,"lblUsu")%>"><%=canOrderBy?"<u>":""%><%=LabelManager.getName(labelSet,"lblUsu")%><%=canOrderBy?"</u>":""%></th><% canOrderBy = false; //dBean.getFilter().getOrderBy() != MonitorDocumentFilterVo.ORDER_FECHA; %><th min_width="120px" style="width:120px<% if (canOrderBy) {%>;cursor:hand" onclick="orderBy('<%=MonitorDocumentFilterVo.ORDER_FECHA%>')<%}%>" title="<%=LabelManager.getToolTip(labelSet,"lblFecUpl")%>"><%=canOrderBy?"<u>":""%><%=LabelManager.getName(labelSet,"lblFecUpl")%><%=canOrderBy?"</u>":""%></th></tr></thead><tbody><%	Collection col = dBean.getList();
							if (col != null) {
								Iterator it = col.iterator();
								int i = 0;
								DocumentVo docVo = null;
								while (it.hasNext()) {
									docVo = (DocumentVo) it.next(); 
									docVo.canRead(); %><tr row_id="<%=dBean.fmtStr(docVo.getReqString())%>" id=LIST><td style="min-width:100px"><%= dBean.fmtHTML(docVo.getDocName()) %></td><td style="min-width:100px"><%= dBean.fmtHTML(docVo.getDocDesc()) %></td><td align="right"><%= (docVo.getDocSize() != null)?dBean.fmtFileSize(request,docVo.getDocSize().intValue()):"" %></td><td><%= 
											DocumentVo.DOC_TYPE_TASK.equals(docVo.getDocType())?LabelManager.getName(labelSet,"lblTask"):
											DocumentVo.DOC_TYPE_PROCESS.equals(docVo.getDocType())?LabelManager.getName(labelSet,"lblPro"):
											DocumentVo.DOC_TYPE_PROCESS_INST.equals(docVo.getDocType())?LabelManager.getName(labelSet,"lblProInst"):
											DocumentVo.DOC_TYPE_BUS_ENT.equals(docVo.getDocType())?LabelManager.getName(labelSet,"lblBusEnt"):
											DocumentVo.DOC_TYPE_BUS_ENT_INST.equals(docVo.getDocType())?LabelManager.getName(labelSet,"lblBusEntInst"):
											DocumentVo.DOC_TYPE_FORM.equals(docVo.getDocType())?LabelManager.getName(labelSet,"lblForm"):
											DocumentVo.DOC_TYPE_BUS_ENT_INST_ATTRIBUTE.equals(docVo.getDocType())?LabelManager.getName(labelSet,"lblBusEntInstAtt"):
											DocumentVo.DOC_TYPE_ENVIRONMENT.equals(docVo.getDocType())?LabelManager.getName(labelSet,"lblAmb"):
											DocumentVo.DOC_TYPE_PRO_INST_ATTRIBUTE.equals(docVo.getDocType())?LabelManager.getName(labelSet,"lblProInstAtt"):""
								 		%></td><td><%=dBean.fmtHTML(docVo.getRegUser())%></td><td><%=dBean.fmtHTMLAMPM(docVo.getRegDate())%></td></tr><%i++;%><%}
							}%></tbody></table><iframe id="docFrame" style="display:none"></iframe></div><table class="navBar"><COL class="col1"><COL class="col2"><tr><%@include file="../../../includes/navButtons.jsp" %><td><button type="button" onclick="btnInfo_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnInfo")%>" title="<%=LabelManager.getToolTip(labelSet,"btnInfo")%>"><%=LabelManager.getNameWAccess(labelSet,"btnInfo")%></button><button type="button" onclick="btnHis_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnHis")%>" title="<%=LabelManager.getToolTip(labelSet,"btnHis")%>"><%=LabelManager.getNameWAccess(labelSet,"btnHis")%></button><button type="button" onclick="btnView_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnDow")%>" title="<%=LabelManager.getToolTip(labelSet,"btnDow")%>"><%=LabelManager.getNameWAccess(labelSet,"btnDow")%></button></td></tr></table></form></div><TABLE class="pageBottom"><COL class="col1"><COL class="col2"><TR><TD></TD><TD><button type="button" onclick="splash()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnSal")%>" title="<%=LabelManager.getToolTip(labelSet,"btnSal")%>"><%=LabelManager.getNameWAccess(labelSet,"btnSal")%></button></TD></TR></TABLE></body></html><%@include file="../../../../components/scripts/server/endInc.jsp" %><script language="javascript">
var DOC_INDEX_ACTIVE = <%= Parameters.DOC_INDEX_ACTIVE %>;

var DOC_TYPE_PROCESS				= "<%= DocumentVo.DOC_TYPE_PROCESS %>";
var DOC_TYPE_BUS_ENT				= "<%= DocumentVo.DOC_TYPE_BUS_ENT %>";
var DOC_TYPE_PROCESS_INST			="<%= DocumentVo.DOC_TYPE_PROCESS_INST %>";
var DOC_TYPE_BUS_ENT_INST			="<%= DocumentVo.DOC_TYPE_BUS_ENT_INST %>";
var DOC_TYPE_BUS_ENT_INST_ATTRIBUTE	="<%= DocumentVo.DOC_TYPE_BUS_ENT_INST_ATTRIBUTE %>";
var DOC_TYPE_PRO_INST_ATTRIBUTE		="<%= DocumentVo.DOC_TYPE_PRO_INST_ATTRIBUTE %>";

</script><script language="javascript" src='<%=Parameters.ROOT_PATH%>/programs/query/monitor/document/monitor.js'></script>

