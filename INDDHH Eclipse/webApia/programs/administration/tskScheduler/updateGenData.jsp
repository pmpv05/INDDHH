		<div type="tab" style="visibility:hidden" style="visibility:hidden;" tabTitle="<%=LabelManager.getToolTip(labelSet,"tabDatGen")%>" tabText="<%=LabelManager.getName(labelSet,"tabDatGen")%>"><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtDatTskSch")%></DIV><table class="tblFormLayout"><tr><!-- PROYECTOS --><%Collection colProj = dBean.getProjects(request); 
		   			boolean hasProject = (tskSchVo.getPrjId() != null && tskSchVo.getPrjId().intValue() != 0);%><td align="right" style="width:20%;" title="<%=LabelManager.getToolTip(labelSet,"titPrj")%>"><%=LabelManager.getNameWAccess(labelSet,"titPrj")%>:</td><td><input type=hidden name="txtPrj" value=""><select name="selPrj" onchange="cmbProySel()" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblPrj")%>"><%if (colProj != null && colProj.size()>0) {
		   					Iterator itPrj = colProj.iterator();
		   					ProjectVo prjVo = null;%><option value="0"></option><%while (itPrj.hasNext()) {
	   							prjVo = (ProjectVo) itPrj.next();%><option value="<%=prjVo.getPrjId()%>"
	   							<%if (hasProject) {
									if (prjVo.getPrjId().equals(tskSchVo.getPrjId())) {
										out.print ("selected");
									}
								}%>
								><%=prjVo.getPrjName()%></option><%}
	   					}%></select></td></tr><!-- NOMBRE --><tr><td align="right" title="<%=LabelManager.getToolTip(labelSet,"lblNom")%>"><%=LabelManager.getName(labelSet,"lblNom")%>:</td><td class="readOnly"><input name="txtName" p_required="true" <%if(tskSchVo!=null) {%>value="<%=dBean.fmtStr(tskSchVo.getTskSchName())%>"<%}%>></td><td align="right" title="<%=LabelManager.getToolTip(labelSet,"lblTit")%>"><%=LabelManager.getName(labelSet,"lblTit")%>:</td><td class="readOnly"><input name="txtTitle" p_required="true" <%if(tskSchVo!=null) {%>value="<%=dBean.fmtStr(tskSchVo.getTskSchTitle())%>"<%}%>></td></tr><!-- DESCRIPCION --><tr><td align="right" title="<%=LabelManager.getToolTip(labelSet,"lblDes")%>"><%=LabelManager.getNameWAccess(labelSet,"lblDes")%>:</td><td colspan=3><input name="txtDesc" maxlength="255" size=80 accesskey="<%=LabelManager.getAccessKey(labelSet,"lblDes")%>" type="text" <%if(tskSchVo!=null && tskSchVo.getTskSchId() != null) {%>value="<%=dBean.fmtStr(tskSchVo.getTskSchDesc())%>"<%}%>></td></tr><!-- CALENDARIOS --><%	Collection colCal = dBean.getCalendars();
   					boolean hasCalendar = (tskSchVo.getCalId() != null && tskSchVo.getCalId().intValue() != 0);%><tr><td align="right" title="<%=LabelManager.getToolTip(labelSet,"titCal")%>"><%=LabelManager.getNameWAccess(labelSet,"titCal")%>:</td><td colspan=2><input type=hidden name="txtCal" value=""><select name="selCal" onChange="reloadGrid()" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblEntAso")%>"><%Iterator itCal = colCal.iterator();
		   					CalendarVo calVo = null;%><option value="0"></option><%
		   					while (itCal.hasNext()) {
		   						calVo = (CalendarVo) itCal.next();%><option value="<%=calVo.getCalendarId()%>" 
		   						<%if (hasCalendar) {
									if (calVo.getCalendarId().equals(tskSchVo.getCalId())) {
										out.print ("selected");
									}%>
									><%=calVo.getCalendarName()%></option><%} else {%>
									><%=calVo.getCalendarName()%></option><%}%><%}%></select>
		   				&nbsp;
		   				<button type="button" id="btnVerCal" onClick="btnViewCalendar()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnVer")%>" title="<%=LabelManager.getToolTip(labelSet,"btnVer")%>"><%=LabelManager.getNameWAccess(labelSet,"btnVer")%></button></td></tr><!-- ACTIVACION PREVIA (MINUTOS) --><tr><td align="right" title="<%=LabelManager.getToolTip(labelSet,"lblActPrvMins")%>"><%=LabelManager.getName(labelSet,"lblActPrvMins")%>:</td><td class="readOnly"><input p_required="true" name="txtActPrev" id="txtActPrev" p_numeric="true" <%if(tskSchVo!=null) {%>onchange="checkModActPrev(<%=tskSchVo.getTskSchPrvActTime().intValue()%>)" value="<%=tskSchVo.getTskSchPrvActTime().intValue()%>"<%}%>></input></td></tr><tr><input type="hidden" name="hidUsrCanWrite" value="<%=saveChanges%>"></tr></table><BR><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtWeekData")%></DIV><table class="tblFormLayout"><tr><!-- SUBDIVISION HORARIA --><td align="right" style="width:20%;" title="<%=LabelManager.getToolTip(labelSet,"lblSubHoraria")%>"><%=LabelManager.getNameWAccess(labelSet,"lblSubHoraria")%>:</td><td align="left"><%boolean hasSettings = dBean.hasSettings(null);%><select name="selFracc" <%=(hasSettings)?"disabled":""%> onChange="changeFraccCmb();reloadGrid()" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblSubHoraria")%>"><option value="-1"></option><% Iterator itFracc = dBean.getPosibleFraccTimes().iterator();
	   						   while (itFracc.hasNext()){
	   						   		Integer fracVal = (Integer) itFracc.next();%><option value="<%=fracVal.intValue()%>" <%=(dBean.getTskSchWeekFracc(null) == fracVal.intValue())? "selected": ""%>><%=fracVal.intValue()%></option><%}%><option value="0"><%=LabelManager.getToolTip(labelSet,"lblOther")%></option></select><input name="txtOthFracc" id="txtOthFracc" style="width:30px;" maxlength="5" p_numeric="true" onchange="changeFraccInput()" <%if(tskSchVo==null || dBean.isComboFracc()){%> disabled <%}%> value="<%=(tskSchVo!=null && !dBean.isComboFracc())?dBean.getTskSchWeekFracc(null):""%>"></input><input type="hidden" name="txtHidFracc" value="<%=dBean.getTskSchWeekFracc(null)%>"></td><!-- SOBREASIGNACION --><td align="right" title="<%=LabelManager.getToolTip(labelSet, "lblOvrAsign")%>"><%=LabelManager.getNameWAccess(labelSet, "lblOvrAsign")%>:</td><td class="readOnly"><input p_required="true" name="txtOvrAsign" id="txtOvrAsign" p_numeric="true" <%if(tskSchVo!=null) {%>value="<%=dBean.getTskSchWeekOvrAsgn(null)%>"<%}%>></input></td></tr><tr><!-- TEMPLATE --><% Collection colTemp = dBean.getTemplates(); %><td align="right" title="<%=LabelManager.getToolTip(labelSet, "lblTskSchTemplate")%>"><%=LabelManager.getNameWAccess(labelSet, "lblTskSchTemplate")%>:</td><td><select name="selTemplate" id="selTemplate" onchange="selTemplateChange()" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblTskSchTemplate")%>"><%if (colTemp != null && colTemp.size()>0) {
		   					Iterator itTmp = colTemp.iterator();
		   					TskSchTemplateVo tskSchTempVo = null;%><option value="0"></option><%
		   					while (itTmp.hasNext()){
		   						tskSchTempVo = (TskSchTemplateVo) itTmp.next();%><option value="<%=tskSchTempVo.getTskSchTemId()%>"><%=tskSchTempVo.getTskSchTemName()%></option><%}
	   					}%></select><span style="vertical-align:bottom;"><img title="<%=LabelManager.getToolTip(labelSet,"lblDelTemplate")%>" src="<%=Parameters.ROOT_PATH%>/styles/<%= styleDirectory %>/images/eraser.gif" width="17" height="16" onclick="btnRemTemplate_click(this)" style="cursor:pointer;cursor:hand"></span></td><td align="right" ><button type="button" onclick="btnSaveTemplate()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnSaveTemplate")%>" title="<%=LabelManager.getToolTip(labelSet,"btnSaveTemplate")%>"><%=LabelManager.getNameWAccess(labelSet,"btnSaveTemplate")%></button></td><td class="readOnly"><input name="txtTemplate" title="<%=LabelManager.getToolTip(labelSet, "lblTempName")%>" id="txtTemplate"></input></td></td></tr><tr><td/><td/><td/><td/><br></table><!-- GRILLA CON LA AGENDA --><table><tr><td></td><td align="center"><button type="button" onclick="btnPrevWeek()" title="<%=LabelManager.getToolTip(labelSet,"btnPrevWeek")%>"><<</button><%=LabelManager.getToolTip(labelSet, "lblWeekOf")%><input style="width:57px;" name="txtWeekSel" id="txtWeekSel" value="<%=dBean.getActualMonday()%>"></input><button type="button" onclick="btnNextWeek()" title="<%=LabelManager.getToolTip(labelSet,"btnNextWeek")%>">>></button><span style="vertical-align:bottom;"><img title="<%=LabelManager.getToolTip(labelSet,"lblDelActualSched")%>" src="<%=Parameters.ROOT_PATH%>/styles/<%= styleDirectory %>/images/eraser.gif" width="17" height="16" onclick="btnRemActualWeek_click(this)" style="cursor:pointer;cursor:hand"></span></td><td></td></tr><tr><td width="50%"></td><td id="gridTsk"><%=dBean.getGridTskScheduler(request, tskSchVo.getTskSchId(), null, tskSchVo.getCalId(), null, 0)%></td><td width="50%"><iframe name="gridSubmit" id="gridSubmit" style="display:none"></iframe></td></tr></table><!-- RADIOBUTTONS --><table class="tblFormLayout"><tr><td></td><td><input type="radio" checked id="radSaveOps" name="radSaveOps" onclick="clickOnRad('allMonth');" value="allMonth"><%=LabelManager.getName(labelSet,"lblSaveForAllMonth")%></input></td><td></td><td></td><td></td></tr><tr><td></td><td><input type="radio" id="radSaveOps" name="radSaveOps" onclick="clickOnRad('allYear');" value="allYear"><%=LabelManager.getName(labelSet,"lblSaveForAllYear")%></input></td><td></td><td></td><td></td></tr><tr><td></td><td style="display:none;"><%=LabelManager.getName(labelSet,"lblSaveForXMonths")%></td><td colspan=2><input type="radio" id="radSaveOps" name="radSaveOps" onclick="clickOnRad('xMonth');" value="xMonth"><%=LabelManager.getName(labelSet,"lblSaveForXMonths")%></input><input style="width:30px;" disabled maxlength="5" name="txtXMonth" id="txtXMonth" p_numeric="true"></input><%=LabelManager.getName(labelSet,"lblMonths")%></td><td></td><td></td></tr><tr><td></td><td><button type="button" onclick="btnDoAction()" title="<%=LabelManager.getToolTip(labelSet,"btnEjeApl")%>"><%=LabelManager.getToolTip(labelSet,"btnEjeApl")%></button></td><td><input type="hidden" id="txtOptSelected" name="txtOptSelected" value="allMonth"></input></td><td></td><td></td></tr></table><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtExclusionDays")%></DIV><br><table class="tblFormLayout"><tr><td></td><td></td><td></td><td></td></tr><tr><td align=left style="margin:100px" colspan=4><table><tr><td title="<%=LabelManager.getName(labelSet,"lblDayFer")%>"><%=LabelManager.getName(labelSet,"lblDayFer")%>:</td><td><input name="txtFch" id="txtFch" size="10" p_calendar="true" class="txtDate" p_mask="<%=DogmaUtil.getHTMLDateMask(dBean.getEnvId(request))%>"maxlength="10" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblFecDes")%>" type="text" value=""></td></td><td></td><td><br><button type="button" onclick="addExclusionDay_click()" title="<%=LabelManager.getToolTip(labelSet,"lblAddHol")%>">&gt;&gt;</button><br><button type="button" onclick="delExclusionDay_click()" title="<%=LabelManager.getToolTip(labelSet,"lblDelHol")%>">&lt;&lt;</button><br></td><td></td><td rowspan=3><select multiple style="height:60px;width:100px" name="txtExcDays" id="txtExcDays" p_maxlength="true" maxlength="255" cols=20 rows=4 accesskey=""><%if (tskSchVo != null && dBean.getExclusionDaysCol() != null && dBean.getExclusionDaysCol().size()>0){
									Iterator it = dBean.getExclusionDaysCol().iterator();
									int i=0;
									while (it.hasNext()){
									String excDay = (String) it.next();%><option value="<%=i%>"><%=excDay%></option><%
										i++;
									}
								}%></td><td><input name="hidExcDays" type="hidden" value= ""/></td></select></td></tr></table></td></tr></table></div>	