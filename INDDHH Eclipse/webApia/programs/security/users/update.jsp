<%@page import="com.dogma.vo.*"%><%@include file="../../../components/scripts/server/startInc.jsp" %><HTML><head><%@include file="../../../components/scripts/server/headInclude.jsp" %></head><body><jsp:useBean id="dBean" scope="session" class="com.dogma.bean.security.UserBean"></jsp:useBean><%
UserVo userVo = dBean.getUserVo();
%><TABLE class="pageTop"><COL class="col1"><COL class="col2"><TR><TD><%=LabelManager.getName(labelSet,dBean.isModeGlobal()?"titUsu":"titUsuEnv")%></TD><TD></TD></TR></TABLE><div id="divContent"><form id="frmMain" name="frmMain" method="POST"><div type="tabElement" id="samplesTab" ontabswitched="tabSwitch()"><div type="tab" style="visibility:hidden" tabTitle="<%=LabelManager.getToolTip(labelSet,"tabDatUsu")%>" tabText="<%=LabelManager.getName(labelSet,"tabDatUsu")%>"><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtDatUsu")%></DIV><table class="tblFormLayout"><COL class="col1"><COL class="col2"><COL class="col3"><COL class="col4"><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblLog")%>"><%=LabelManager.getNameWAccess(labelSet,"lblLog")%>:</td><td><input name="txtLogin" p_required="true" maxlength="20" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblLog")%>" type="text" <%if((userVo!=null && userVo.getUsrLogin()!=null) || Parameters.AUTHENTICATION_EXT_FULL.equals(Parameters.AUTHENTICATION_METHOD) || Parameters.AUTHENTICATION_EXT_LDAP.equals(Parameters.AUTHENTICATION_METHOD)) {%> readonly class="txtReadOnly" value="<%=dBean.fmtStr(userVo.getUsrLogin())%>"<%}%>><%if(Parameters.AUTHENTICATION_EXT_FULL.equals(Parameters.AUTHENTICATION_METHOD) || Parameters.AUTHENTICATION_EXT_LDAP.equals(Parameters.AUTHENTICATION_METHOD)){%><%if(userVo==null || userVo.getUsrLogin()==null){%><img src="<%=Parameters.ROOT_PATH%>/styles/<%= styleDirectory %>/images/btnQuery.gif" onclick="searchExt()"><%}%><%}%></td><td></td><td></td></tr><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblPwd")%>"><%=LabelManager.getNameWAccess(labelSet,"lblPwd")%>:</td><td><input name="txtPwd" maxlength="50" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblPwd")%>" type="password" <%if(userVo!=null) {%> value="<%=dBean.fmtStr(userVo.getUsrPassword())%>"<%}%><%if(Parameters.AUTHENTICATION_EXT_FULL.equals(Parameters.AUTHENTICATION_METHOD) || Parameters.AUTHENTICATION_EXT_LDAP.equals(Parameters.AUTHENTICATION_METHOD)) {%> readonly class="txtReadOnly" <%} else {%> p_required="true"<%} %>></td><td title="<%=LabelManager.getToolTip(labelSet,"lblConPwd")%>"><%=LabelManager.getNameWAccess(labelSet,"lblConPwd")%>:</td><td><input name="txtConf" maxlength="50" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblConPwd")%>" type="password" <%if(userVo!=null) {%> value="<%=dBean.fmtStr(userVo.getUsrPassword())%>"<%}%><%if(Parameters.AUTHENTICATION_EXT_FULL.equals(Parameters.AUTHENTICATION_METHOD) || Parameters.AUTHENTICATION_EXT_LDAP.equals(Parameters.AUTHENTICATION_METHOD)) {%> readonly class="txtReadOnly" <%} else {%> p_required="true"<%} %>></td></tr><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblNom")%>"><%=LabelManager.getNameWAccess(labelSet,"lblNom")%>:</td><td><input name="txtName" p_required="true" maxlength="50" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblNom")%>" type="text" <%if(userVo!=null) {%>value="<%=dBean.fmtStr(userVo.getUsrName())%>"<%}%><%if(Parameters.AUTHENTICATION_EXT_LDAP.equals(Parameters.AUTHENTICATION_METHOD)) {%> readonly class="txtReadOnly" <%}%>></td><td title="<%=LabelManager.getToolTip(labelSet,"lblEma")%>"><%=LabelManager.getNameWAccess(labelSet,"lblEma")%>:</td><td><input name="txtEmail" p_email="true" maxlength="255" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblEma")%>" type="text" <%if(userVo!=null) {%>value="<%=dBean.fmtStr(userVo.getUsrEmail())%>"<%}%><%if(Parameters.AUTHENTICATION_EXT_LDAP.equals(Parameters.AUTHENTICATION_METHOD)) {%> readonly class="txtReadOnly" <%}%>></td></tr><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblCom")%>"><%=LabelManager.getNameWAccess(labelSet,"lblUsuCom")%>:</td><td colspan=3><input name="txtComments" size=80 maxlength="255" accesskey="<%=LabelManager.getAccessKey(labelSet,"lblUsuCom")%>" type="text" <%if(userVo!=null) {%>value="<%=dBean.fmtStr(userVo.getUsrComments())%>"<%}%><%if(Parameters.AUTHENTICATION_EXT_LDAP.equals(Parameters.AUTHENTICATION_METHOD)) {%> readonly class="txtReadOnly" <%}%>></td></tr><%
		   		if (dBean.isModeGlobal()) { %><tr><td title="<%=LabelManager.getToolTip(labelSet,"lblNotAct")%>"><%=LabelManager.getNameWAccess(labelSet,"lblNotAct")%>:</td><td><input type="checkbox" name="chkNotAct" onclick="chkAllEnvClick()" <%= (userVo != null && userVo.getFlagValue(UserVo.FLAG_DISABLED))?"checked":""%> accesskey="<%=LabelManager.getAccessKey(labelSet,"lblNotAct")%>"></td><td></td><td></td></tr><%
			   	} %></table><!--     - Pools del usuario          --><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtUsuPoo")%></DIV><div type="grid" id="gridPools" style="height:100px"><table id="tblPools"  width="500px" cellpadding="0" cellspacing="0"><thead><tr><th style="width:0px;display:none;" title="<%=LabelManager.getToolTip(labelSet,"lblSel")%>"></th><th style="width:100%" title="<%=LabelManager.getToolTip(labelSet,"lblNom")%>"><%=LabelManager.getName(labelSet,"lblNom")%></th></tr></thead><tbody id="tblPoolBody"><%if (userVo.getUserPools() != null){
						Iterator itPools = userVo.getUserPools().iterator();
 						while (itPools.hasNext()) {
 							PoolVo poolVo = (PoolVo) itPools.next();
 							%><tr><td><input type="<%= ("0".equals(poolVo.getPoolGenerated()))?"checkbox":"hidden" %>" name="chkPoolSel"><input type=hidden name="chkPool" value="<%=dBean.fmtInt(poolVo.getPoolId())%>"></td><td><%=dBean.fmtHTML(poolVo.getPoolName())%></td></tr><%
 						} 
 					}%></tbody></table></div><table class="navBar"><COL class="col1"><COL class="col2"><tr><TD></TD><td><button type="button" onclick="btnAddPool_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnAgr")%>" title="<%=LabelManager.getToolTip(labelSet,"btnAgr")%>"><%=LabelManager.getNameWAccess(labelSet,"btnAgr")%></button><button type="button" onclick="btnDelPool_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnEli")%>" title="<%=LabelManager.getToolTip(labelSet,"btnEli")%>"><%=LabelManager.getNameWAccess(labelSet,"btnEli")%></button></td></tr></table></div><div type="tab" style="visibility:hidden" tabTitle="<%=LabelManager.getToolTip(labelSet,"tabDetUsu")%>" tabText="<%=LabelManager.getName(labelSet,"tabDetUsu")%>"><!--     - Perfiles del usuario          --><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtUsuPrf")%></DIV><div type="grid" id="gridProfiles" style="height:100px"><table id="tblProfiles"  width="500px" cellpadding="0" cellspacing="0"><thead><tr><th style="width:0px;display:none;" title="<%=LabelManager.getToolTip(labelSet,"lblSel")%>"></th><th style="width:100%" title="<%=LabelManager.getToolTip(labelSet,"lblNom")%>"><%=LabelManager.getName(labelSet,"lblNom")%></th></tr></thead><tbody id="tblPerBody"><%if (userVo.getUserProfiles() != null){
						Iterator itProfiles = userVo.getUserProfiles().iterator();
						while (itProfiles.hasNext()) {
							ProfileVo profileVo = (ProfileVo) itProfiles.next();
							%><tr><td><input type="checkbox" name="chkPrfSel"><input type=hidden name="chkPrf" value="<%=dBean.fmtInt(profileVo.getPrfId())%>"></td><td><%=dBean.fmtHTML(profileVo.getPrfName())%></td></tr><%
						} 
					}%></tbody></table></div><table class="navBar"><COL class="col1"><COL class="col2"><tr><TD></TD><td><button type="button" onclick="btnAddProfile_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnAgr")%>" title="<%=LabelManager.getToolTip(labelSet,"btnAgr")%>"><%=LabelManager.getNameWAccess(labelSet,"btnAgr")%></button><button type="button" onclick="btnDelProfile_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnEli")%>" title="<%=LabelManager.getToolTip(labelSet,"btnEli")%>"><%=LabelManager.getNameWAccess(labelSet,"btnEli")%></button></td></tr></table><!--     - Ambientes del usuario          --><%if(dBean.isModeGlobal()){%><DIV class="subTit"><%=LabelManager.getName(labelSet,"sbtUsuEnv")%></DIV><div type="grid" id="gridEnvironments" style="height:100px"><table id="tblEnvironments"  width="500px" cellpadding="0" cellspacing="0"><thead><tr><th style="width:0px;display:none;" title="<%=LabelManager.getToolTip(labelSet,"lblSel")%>"></th><th style="width:100%" title="<%=LabelManager.getToolTip(labelSet,"lblNom")%>"><%=LabelManager.getName(labelSet,"lblNom")%></th></tr></thead><tbody id="tblPerBody"><%if (userVo.getUserEnvironments() != null){
						Iterator itEnvironments = userVo.getUserEnvironments().iterator();
						while (itEnvironments.hasNext()) {
							EnvironmentVo environmentVo = (EnvironmentVo) itEnvironments.next();
							%><tr><td><input type="checkbox" name="chkEnvSel"><input type=hidden name="chkEnv" value="<%=dBean.fmtInt(environmentVo.getEnvId())%>"></td><td><%=dBean.fmtHTML(environmentVo.getEnvName())%></td></tr><%
						} 
					}%></tbody></table></div><table class="navBar"><COL class="col1"><COL class="col2"><tr><TD></TD><td><button type="button" onclick="btnAddEnvironment_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnAgr")%>" title="<%=LabelManager.getToolTip(labelSet,"btnAgr")%>"><%=LabelManager.getNameWAccess(labelSet,"btnAgr")%></button><button type="button" onclick="btnDelEnvironment_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnEli")%>" title="<%=LabelManager.getToolTip(labelSet,"btnEli")%>"><%=LabelManager.getNameWAccess(labelSet,"btnEli")%></button></td></tr></table><%}%></div></div></form></div><TABLE class="pageBottom"><COL class="col1"><COL class="col2"><TR><TD></TD><TD><button type="button" onclick="btnConf_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnCon")%>" title="<%=LabelManager.getToolTip(labelSet,"btnCon")%>"><%=LabelManager.getNameWAccess(labelSet,"btnCon")%></button><button type="button" onclick="btnBack_click()" accesskey="<%=LabelManager.getAccessKey(labelSet,"btnVol")%>" title="<%=LabelManager.getToolTip(labelSet,"btnVol")%>"><%=LabelManager.getNameWAccess(labelSet,"btnVol")%></button></TD></TR></TABLE></body></html><%@include file="../../../components/scripts/server/endInc.jsp" %><script language="javascript" src='<%=Parameters.ROOT_PATH%>/programs/security/users/update.js'></script><SCRIPT>
var isGlobal 			= <%=dBean.isModeGlobal()%>;
var envId 				= <%=dBean.getEnvId(request)%>;
var MSG_PWD_DIF			= "<%=LabelManager.getName(labelSet,"msgUsuPwdDif")%>";
var inHierarchy         = <%=dBean.isInHierarchy()%>;
function tabSwitch(){
}
</SCRIPT>