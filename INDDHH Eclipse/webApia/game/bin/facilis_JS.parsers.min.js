(function(){function k(){this.setup()}var g=facilis.extend(k,{});g.setup=function(){this.workflowProcessObj=this.mainWorkflowProcessId=this.workflowProcessName=this.toParseXML=this.parsedXML=null;this.processAction=""};k.performers=[];k.artifacts=[];k.datastores=[];g.parse=function(a){this.workflowProcessName="";toParseXML=a;if(!a.firstElementChild)return null;a=a.firstElementChild;var b;for(b=0;b<a.children.length;b++)if(a.children[b].localName=="DataStores"){this.parseDataStores(a.children[b],this.datastores);
break}for(b=0;b<a.children.length;b++){a.children[b].localName=="Pools"&&this.parsePools(a.children[b]);if(a.children[b].localName=="Artifacts")this.artifacts=this.parseArtifacts(a.children[b]);if(a.children[b].localName=="Associations")this.associations=this.parseAssociations(a.children[b]);if(a.children[b].localName=="MessageFlows")this.messageFlows=this.parseMessageFlows(a.children[b]);if(a.children[b].localName=="Participants")for(var c=a.children[b],d=0;d<c.children.length;d++){var e=c.children[d];
k.addParticipant(e.getAttribute("Id"),e.getAttribute("Name"))}}a=facilis.parsers.ParseInUtils.getSubNode(this.parsedXML,"subElements");if(!a){a=this.parsedXML.ownerDocument.createElement("subElements");this.parsedXML.appendChild(a)}if(this.artifacts)for(b=0;b<this.artifacts.length;b++)if(facilis.View.importDisconnectedArtifacts||!facilis.View.importDisconnectedArtifacts&&this.artifactHasValidAssociation(this.artifacts[b],this.associations))this.parsedXML.appendChild(this.artifacts[b]);if(this.associations)for(b=
0;b<this.associations.length;b++)this.parsedXML.appendChild(this.associations[b]);if(this.messageFlows)for(b=0;b<this.messageFlows.length;b++)this.parsedXML.appendChild(this.messageFlows[b]);return this.parsedXML};g.artifactHasValidAssociation=function(a,b){if(b&&a.getAttribute("name")=="dataobject")for(var c=0;c<b.length;c++){var d=b[c];if(d.getAttribute("startid")==a.getAttribute("id")||d.getAttribute("endid")==a.getAttribute("id"))return true}else if(a.getAttribute("name")!="dataobject")return true;
return false};g.parsePools=function(a){var b=[],c,d,e=true,f,i=facilis.parsers.ParseInUtils.getParsedNode("<Pools></Pools>"),h;for(d=0;d<a.children.length;d++){c=a.children[d].getAttribute("MainPool");if(c=="true"){f=a.children[d];e=false}}if(e){for(d=0;d<a.children.length;d++)if(a.children[d].getAttribute("BoundaryVisible")=="false"){f=a.children[d];break}f||(f=a.children[0]);f.setAttribute("MainPool","true")}else if(f.getAttribute("BoundaryVisible")=="true"){a=facilis.parsers.ParseInUtils.getParsedNode("<Pool></Pool>");
h=f.cloneNode(true);a.setAttribute("MainPool","true");f.setAttribute("MainPool","false");h.setAttribute("Process","");i.appendChild(a);i.appendChild(h);a=i}else{d=facilis.parsers.ParseInUtils.getSubNode(toParseXML,"WorkflowProcesses");i=facilis.parsers.ParseInUtils.getSubNode(toParseXML,"Pools");c={};for(e=0;e<i.children.length;e++)c[i.children[e].getAttribute("Process")]=true;i="";for(e=0;e<d.children.length;e++){d.children[e].getAttribute("Id")==f.getAttribute("Process")&&d.children[e].getAttribute("Name")&&
f.setAttribute("Name",d.children[e].getAttribute("Name"));var j;if(d.children[e].getAttribute("Name")&&facilis.parsers.ParseInUtils.getSubNode(d.children[e],"Activities")){this.workflowProcessName=d.children[e].getAttribute("Name");h=null;for(j=0;j<d.children[e].children.length;j++)if(d.children[e].children[j].localName=="Object"){h=d.children[e];break}if(h)this.workflowProcessObj=h}if(this.workflowProcessName!="")break;if(d.children[e].getAttribute("Name")&&c[d.children[e].getAttribute("Name")]){i=
d.children[e].getAttribute("Name");if(!h)for(j=0;j<d.children[e].children.length;j++)if(d.children[e].children[j].localName=="Object"){h=d.children[e];break}if(h)this.workflowProcessObj=h}if(d.children[e].getAttribute("ProAction"))this.processAction=d.children[e].getAttribute("ProAction")}if(this.workflowProcessName==""&&i!="")this.workflowProcessName=i;f.getAttribute("Name")||f.setAttribute("Name",this.workflowProcessName);if(this.workflowProcessObj){h=this.removeWFNodes(this.workflowProcessObj);
for(d=0;h.length>0;){f.appendChild(h[0]);h.splice(0,1);d++}}}c="false";for(d=0;d<a.children.length;d++){if(c=="false"){c=a.children[d].getAttribute("MainPool")+"";if(c!="true")c=(a.children[d].getAttribute("BoundaryVisible")=="false").toString()}if(c=="true"){f=this.getElementParser("back");f.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes("back"))}else{f=this.getElementParser("pool");f.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes("pool"))}f=
f.parse(a.children[d]);if(c=="true"){this.parsedXML=f;c="ready"}else b.push(f)}a=facilis.parsers.ParseInUtils.getSubNode(this.parsedXML,"subElements");if(!a){a=this.parsedXML.ownerDocument.createElement("subElements");this.parsedXML.appendChild(a)}for(d=0;d<b.length;d++){a.appendChild(b[d]);this.parseWorkflow(b[d])}this.parsedXML.appendChild(a);if(b.length==0)this.parseWorkflow(this.parsedXML);else{this.parseWorkflowProEvents(this.parsedXML);this.parseWorkflowProForms(this.parsedXML)}if(this.parsedXML){this.workflowProcessName&&
facilis.parsers.ParseInUtils.setSubNodeValue(this.parsedXML.firstElementChild,"name",this.workflowProcessName);this.processAction&&facilis.parsers.ParseInUtils.setSubNodeValue(this.parsedXML.firstElementChild,"protype",this.processAction)}};g.removeWFNodes=function(a){var b=[],c=[],d={};d.ApiaProEvents=true;d.Object=true;var e=0;for(e=0;e<a.children.length;e++)d[a.children[e].localName]&&b.push(a.children[e]);for(e=0;e<b.length;e++){c.push(b[e].cloneNode(true));b[e].parentNode.removeChild(b[e])}return c};
g.parseWorkflow=function(a){for(var b=facilis.parsers.ParseInUtils.getSubNode(toParseXML,"WorkflowProcesses"),c,d=0;d<b.children.length;d++)if(b.children[d].getAttribute("Id")==a.getAttribute("process")){c=b.children[d];break}if(c){b=new facilis.parsers.input.WorkflowProcess;b.setParsedNode(a);b.parse(c);this.parseSubElements(c,a)}};g.parseWorkflowProForms=function(a){for(var b=facilis.parsers.ParseInUtils.getSubNode(toParseXML,"WorkflowProcesses"),c=0;c<b.children.length;c++){var d=new facilis.parsers.input.WorkflowProcess;
d.setParsedNode(a);d.toParseNode=b.children[c];d.getDocumentation()}};g.parseWorkflowProEvents=function(a){for(var b=facilis.parsers.ParseInUtils.getSubNode(toParseXML,"WorkflowProcesses"),c=null,d=0;d<b.children.length&&c==null;d++)for(var e=b.children[d],f=0;f<e.children.length&&c==null;f++)if(e.children[f].localName=="ApiaProEvents")c=e.children[f];if(c){b=new WorkflowProcess;b.setParsedNode(a);b.parseLaneEvents(c)}};g.parseSubElements=function(a,b){if(a&&b){var c=facilis.parsers.ParseInUtils.getSubNode(b,
"subElements"),d=b.ownerDocument.createElement("activitySets");if(!c){c=b.ownerDocument.createElement("subElements");b.appendChild(c)}var e=0;for(e=0;e<a.children.length;e++){a.children[e].localName=="Activities"&&this.parseActivities(c,a.children[e]);a.children[e].localName=="Transitions"&&this.parseTransitions(c,a.children[e]);a.children[e].localName=="ActivitySets"&&this.parseActivitySets(d,a.children[e]);a.children[e].localName=="DataInputOutputs"&&this.parseDataInputOutputs(a.children[e],this.artifacts);
a.children[e].localName=="DataStoreReferences"&&this.parseDataStoreReferences(a.children[e],this.artifacts)}for(e=d.children.length-1;e>=0;e--)for(var f=d.children[e].getAttribute("id"),i=0;i<c.children.length;i++)if(c.children[i].getAttribute("id")==f)if(d.children[e]){c.children[i].appendChild(d.children[e]);break}}};g.parseActivities=function(a,b){for(var c=0;c<b.children.length;c++)if(b.children[c]){var d=this.getElementType(b.children[c]),e=this.getElementParser(d);e.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes(d));
d=e.parse(b.children[c]);a.appendChild(d)}};g.parseTransitions=function(a,b){for(var c=0;c<b.children.length;c++)if(b.children[c]){var d=this.getElementType(b.children[c]),e=this.getElementParser(d);e.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes(d));d=e.parse(b.children[c]);a.appendChild(d)}};g.parseActivitySets=function(a,b){for(var c=0;c<b.children.length;c++)if(b.children[c]){var d=a.ownerDocument.createElement("subElements");d.setAttribute("id",b.children[c].getAttribute("Id"));
a.appendChild(d);this.parseActivitySet(d,b.children[c])}};g.parseActivitySet=function(a,b){this.parseSubElements(b,a)};g.parseDataStores=function(a,b){for(var c=0;c<a.children.length;c++){var d=a.children[c];if(d){var e=this.getElementType(d),f=this.getElementParser(e);f.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes(e));d=f.parse(d);b.push(d)}}};g.parseArtifacts=function(a){for(var b=[],c=0;c<a.children.length;c++)if(a.children[c]){var d=this.getElementType(a.children[c]),
e=this.getElementParser(d);e.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes(d));d=e.parse(a.children[c]);b.push(d)}return b};g.parseDataInputOutputs=function(a,b){for(var c=0;c<a.children.length;c++)if(a.children[c]){var d=this.getElementType(a.children[c]),e=this.getElementParser(d);e.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes(d));d=e.parse(a.children[c]);b.push(d)}};g.parseDataStoreReferences=function(a,b){for(var c=0;c<
a.children.length;c++)if(a.children[c]){var d=this.getElementType(a.children[c]),e=this.getElementParser(d);e.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes(d));d=e.parse(a.children[c]);a.children[c].getAttribute("DataStoreRef");e=a.children[c].getAttribute("State");var f;for(f=0;f<d.children[0].children.length;f++)if(d.children[0].children[f].getAttribute("name")=="state"){d.children[0].children[f].setAttribute("value",e);break}for(f=0;f<this.datastores.length;f++)if(this.datastores[f].getAttribute("id")==
"datastoreref"){e=this.datastores[f].children[0].children;for(f=0;f<e.length;f++)if(e[f].getAttribute("name")=="documentation"||e[f].getAttribute("name")=="name"||e[f].getAttribute("name")=="capacity"||e[f].getAttribute("name")=="isUnlimited")for(var i=0;i<d.children[0].children.length;i++)if(d.children[0].children[i].getAttribute("name")==e[f].getAttribute("name")){d.children[0].children[i].getAttribute("value",e[f].getAttribute("value"));for(var h=0;h<e[f].children.length;h++)d.children[0].children[i].appendChild(e[f].children[h].cloneNode(true));
break}break}b.push(d)}};g.parseAssociations=function(a){for(var b=[],c=0;c<a.children.length;c++)if(a.children[c]){var d=this.getElementParser("association");d.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes("association"));d=d.parse(a.children[c]);b.push(d)}return b};g.parseMessageFlows=function(a){for(var b=[],c=0;c<a.children.length;c++)if(a.children[c]){var d=this.getElementParser("mflow");d.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes("mflow"));
d=d.parse(a.children[c]);b.push(d)}return b};g.getElementParser=function(a){var b="";switch(a){case "task":b="Task";break;case "csubflow":b="Subflow";break;case "esubflow":b="Subflow";break;case "startevent":b="Event";break;case "middleevent":b="Event";break;case "endevent":b="Event";break;case "gateway":b="Gateway";break;case "pool":b="Pool";break;case "group":b="Artifact";break;case "swimlane":b="Lane";break;case "textannotation":b="Artifact";break;case "dataobject":case "datainput":case "dataoutput":b=
"Artifact";break;case "datastore":b="Artifact";break;case "back":b="Back";break;case "association":b="Association";break;case "mflow":b="Transition";break;case "sflow":b="Transition";break;case "activityset":b="ActivitySet"}return eval("new facilis.parsers.input."+b+"()")};g.getElementType=function(a){if(facilis.parsers.ParseInUtils.getSubNode(a,"Task"))return"task";else if(facilis.parsers.ParseInUtils.getSubNode(a,"BPMNEvent")||facilis.parsers.ParseInUtils.getSubNode(a,"Event")){a=(facilis.parsers.ParseInUtils.getSubNode(a,
"BPMNEvent")?facilis.parsers.ParseInUtils.getSubNode(a,"BPMNEvent"):facilis.parsers.ParseInUtils.getSubNode(a,"Event")).firstElementChild.localName;return a=="StartEvent"?"startevent":a=="IntermediateEvent"?"middleevent":"endevent"}else if(facilis.parsers.ParseInUtils.getSubNode(a,"Route")||facilis.parsers.ParseInUtils.getSubNode(a,"Gateway"))return"gateway";else if(facilis.parsers.ParseInUtils.getSubNode(a,"BlockActivity")||facilis.parsers.ParseInUtils.getSubNode(a,"SubFlow"))return facilis.parsers.ParseInUtils.getSubNode(a,
"NodeGraphicsInfo").getAttribute("Expanded")=="true"?"esubflow":"csubflow";else if(a.localName=="Transition")return"sflow";else if(a.localName=="DataInput")return"datainput";else if(a.localName=="DataOutput")return"dataoutput";else if(a.localName=="DataStore")return"datastore";else if(a.localName=="DataStoreReferences"||a.localName=="DataStoreReference"||a.localName=="DataStores"||a.localName=="DataStore")return"datastore";else if(a.getAttribute("ArtifactType")){a=a.getAttribute("ArtifactType");return a==
"DataObject"?"dataobject":a=="Group"?"group":"textannotation"}else if(facilis.parsers.ParseInUtils.getSubNode(a,"Implementation")){facilis.parsers.ParseInUtils.getSubNode(a,"Implementation");return"task"}else if(a.localName=="Lane")return"swimlane"};k.addParticipant=function(a,b){for(var c=0;c<k.performers.length;c++)if(k.performers[c].id==a)return;if(b==null||b=="")b=a;k.performers.push({id:a,name:b})};k.getParticipantByName=function(a){for(var b=0;b<k.performers.length;b++)if(k.performers[b].name==
a)return k.performers[b];return null};k.getParticipantById=function(a){for(var b=0;b<k.performers.length;b++)if(k.performers[b].id==a)return k.performers[b];return null};k.getParticipantByIdOrName=function(a){for(var b=0;b<k.performers.length;b++){if(k.performers[b].id==a)return k.performers[b];if(k.performers[b].name==a)return k.performers[b]}return null};facilis.parsers.ParserIn=facilis.promote(k,"Object");facilis.parsers.ParseInUtils={};facilis.parsers.ParseInUtils.getParsedNode=function(a){return(new window.DOMParser).parseFromString(a,
"text/xml").firstElementChild};facilis.parsers.ParseInUtils.getSubNodeValue=function(a,b){var c=getSubNode(a,b);if(c&&c.setAttribute("value","")!=undefined&&c.getAttribute("value")!="undefined")return c.getAttribute("value");return null};facilis.parsers.ParseInUtils.setSubNodeValue=function(a,b,c){if(c)(a=facilis.parsers.ParseInUtils.getSubNode(a,b))&&a.setAttribute("value",c)};facilis.parsers.ParseInUtils.getSubNode=function(a,b){b=b||"";if(a&&a.children){for(var c=0;c<a.children.length;c++)if((a.children[c].getAttribute("name")||
"").toLowerCase()==b.toLowerCase()||(a.children[c].nodeName||"").toLowerCase()==b.toLowerCase()||(a.children[c].localName||"").toLowerCase()==b.toLowerCase())return a.children[c];for(c=0;c<a.children.length;c++){var d=facilis.parsers.ParseInUtils.getSubNode(a.children[c],b);if(d)return d}}return null}})();
(function(){function k(){this.toParseNode=this.parsedNode=null;this.parseFunctions=[];this.parseFunctions.push(this.getId);this.parseFunctions.push(this.getName);this.parseFunctions.push(this.getDocumentation);this.parseFunctions.push(this.parseCategories);this.parseFunctions.push(this.parseDataFields);this.parseFunctions.push(this.parseUserAttributes);this.parseFunctions.push(this.getNodeGraphicsInfo)}var g=facilis.extend(k,{});g.getNodeGraphicsInfo=function(){var a=this.getToParseSubNode("NodeGraphicsInfos");
if(a&&a.firstElementChild){a=a.firstElementChild;this.parseNodeGraphicsInfo(a)}else(a=this.getToParseSubNode("NodeGraphicsInfo"))&&this.parseNodeGraphicsInfo(a)};g.parseNodeGraphicsInfo=function(a){var b=a.getAttribute("Width"),c=a.getAttribute("Height"),d=0,e=0;if(a.firstElementChild){d=a.firstElementChild.getAttribute("XCoordinate");e=a.firstElementChild.getAttribute("YCoordinate")}this.parsedNode.setAttribute("x",d?d:"0");this.parsedNode.setAttribute("y",e?e:"0");this.parsedNode.setAttribute("width",
b?b:"0");this.parsedNode.setAttribute("height",c?c:"0");(b=a.getAttribute("Shape"))&&this.parsedNode.setAttribute("shape",b);this.getColor(a)};g.getColor=function(a){if(a=a.getAttribute("FillColor")){var b=facilis.parsers.ParseInUtils.getSubNode(this.parsedNode.firstElementChild,"colorFill");b&&b.setAttribute("value",a)}};g.getName=function(){var a=this.toParseNode.getAttribute("Name");if(this.parsedNode&&a)for(var b=this.parsedNode.children[0],c=0;c<b.children.length;c++)if(b.children[c].getAttribute("name")==
"name"||b.children[c].getAttribute("name")=="nameChooser")b.children[c].setAttribute("value",a)};g.getId=function(){var a=this.toParseNode.getAttribute("Id");a!=null&&this.parsedNode.setAttribute("id",a)};g.parse=function(a){this.toParseNode=a;return this.startParse()};g.setParsedNode=function(a){this.parsedNode=a};g.getToParseSubNode=function(a,b){return facilis.parsers.ParseInUtils.getSubNode(b||this.toParseNode,a)};g.getParsedSubNode=function(a){return facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,
a)};g.getToParseSubNodeValue=function(a){return facilis.parsers.ParseInUtils.getSubNodeValue(this.toParseNode,a)};g.getParsedSubNodeValue=function(a){return facilis.parsers.ParseInUtils.getSubNodeValue(parsedNode,a)};g.callParseFunctions=function(){for(var a=0;a<this.parseFunctions.length;a++)this.parseFunctions[a].apply(this)};g.startParse=function(){this.callParseFunctions();return this.parsedNode};g.getParsedNode=function(a){return facilis.parsers.ParseInUtils.getParsedNode(a)};g.setParsedSubNodeValue=
function(a,b){var c=this.getParsedSubNode(a);c&&c.setAttribute("value",b)};g.getData=function(a){return facilis.parsers.ParseInUtils.getSubNode(a,"data")};g.getDocumentation=function(){for(var a,b=0;b<this.toParseNode.children.length;b++)if(this.toParseNode.children[b].localName=="Object")a=this.toParseNode.children[b];var c;if(a)c=facilis.parsers.ParseInUtils.getSubNode(a,"Documentation");if(!c)for(b=0;b<this.toParseNode.children.length;b++)if(this.toParseNode.children[b].localName=="Documentation"){c=
this.toParseNode.children[b];break}var d=a=null,e=null,f=null;if(this.parsedNode.firstElementChild)for(b=0;b<this.parsedNode.firstElementChild.children.length;b++){if(this.parsedNode.firstElementChild.children[b].getAttribute("name")=="documentation")a=this.parsedNode.firstElementChild.children[b];if(this.parsedNode.firstElementChild.children[b].getAttribute("name")=="forms")d=this.parsedNode.firstElementChild.children[b];if(this.parsedNode.firstElementChild.children[b].getAttribute("name")=="events")e=
this.parsedNode.firstElementChild.children[b];if(this.parsedNode.firstElementChild.children[b].getAttribute("name")=="title")f=this.parsedNode.firstElementChild.children[b]}if(c)d||e||f?this.parseAdvancedDocumentation(c,a,d,e,f):this.parseDocumentationNode(c,a)};g.parseDocumentationNode=function(a,b){if(b&&a&&a.firstElementChild){var c=a.firstElementChild.textContent;if(c.indexOf("&lt;forms")>=0||c.indexOf("&lt;events")>=0||c.indexOf("&lt;documentation")>=0||c.indexOf("&lt;title")>=0||c.indexOf("<forms")>=
0||c.indexOf("<events")>=0||c.indexOf("<documentation")>=0||c.indexOf("<title")>=0){c=facilis.parsers.ParseInUtils.getParsedNode("<aux>"+c+"</aux>");a=this.parsedNode.ownerDocument.createElement("Documentation");for(var d=0;d<c.children.length;d++){var e=c.children[d].cloneNode(true);if(e.nodeName=="documentation"){a.appendChild(this.parsedNode.ownerDocument.createTextNode(e.textContent));break}}}else if(a.firstElementChild&&a.textContent)if((c=a.firstElementChild.textContent)&&b){b.firstElementChild&&
b.firstElementChild.nodeName=="values"&&b.removeChild(b.firstElementChild);d=b.ownerDocument.createElement("values");e=b.ownerDocument.createElement("value");var f=b.ownerDocument.createTextNode(c);e.appendChild(f);e.setAttribute("value",c);d.appendChild(e);b.appendChild(d);b.setAttribute("value",c)}}};g.parseAdvancedDocumentation=function(a,b,c,d,e){if(a.firstChild){var f=a.firstChild.wholeText||a.firstChild.textContent,i,h,j,l,n=false;if(f.indexOf("&amp;lt;")>=0){f=f.split("&amp;lt;").join("&lt;");
f=f.split("&amp;gt;").join("&gt;");f=f.split("&amp;quot;").join("&quot;");f=f.split("&amp;amp;").join("&amp;");f=f.split(" = ").join("=");a.firstChild.nodeValue=f;n=true}if(f.indexOf("&lt;forms")>=0||f.indexOf("&lt;events")>=0||f.indexOf("&lt;documentation")>=0||f.indexOf("&lt;title")>=0){f=f.split("&lt;events&gt;").join("<events>");f=f.split("&lt;forms&gt;").join("<forms>");f=f.split("&lt;documentation&gt;").join("<documentation>");f=f.split("&lt;title&gt;").join("<title>");f=f.split("&lt;event").join("<event");
f=f.split("&lt;form").join("<form");f=f.split("&lt;attribute").join("<attribute");if(f.indexOf("<documentation>")>=0){a=f.split("<documentation>");var m;if(a.length>1){a[0]=a[0].split("&quot;").join('"');a[0]=a[0].split("&amp;").join("&");f=a[1].split("</documentation>");m=a[0]}else f=a[0].split("</documentation>");m+=n?"<documentation>"+f[0]:"<documentation>"+f[0].split("&amp;quot;").join("&quot;").split("&amp;gt;").join("&gt;");m+="</documentation>";if(f.length>1){f[1]=f[1].split("&quot;").join('"');
f[1]=f[1].split("&amp;").join("&");m+=f[1]}f=m}else{f=f.split("&quot;").join('"');f=f.split("&amp;").join("&")}f=f.split("&lt;/events&gt;").join("</events>");f=f.split("&lt;/forms&gt;").join("</forms>");f=f.split("&lt;/documentation&gt;").join("</documentation>");f=f.split("&lt;/title&gt;").join("</title>");f=f.split("&lt;/event").join("</event");f=f.split("&lt;/form").join("</form");f=f.split("&lt;/attribute").join("</attribute");f=f.split("&gt;").join(">");f=f.split("&quot;").join('"')}n=facilis.parsers.ParseInUtils.getParsedNode("<aux>"+
f+"</aux>");a=this.parsedNode.ownerDocument.createElement("Documentation");for(m=0;m<n.children.length;m++){f=n.children[m].cloneNode(true);a.appendChild(f);if(f.nodeName=="documentation")i=f;if(f.nodeName=="forms")h=f;if(f.nodeName=="events")j=f;if(f.nodeName=="title")l=f}var o;if(i&&i.firstChild)o=i.firstChild.textContent;if(o&&b){i=b.ownerDocument.createElement("values");a=b.ownerDocument.createElement("value");b.setAttribute("value",o);a.setAttribute("value",o);a.appendChild(b.ownerDocument.createTextNode(o));
i.appendChild(a);b.appendChild(i)}if(h&&c){b=facilis.parsers.ParseInUtils.getSubNode(c,"data");i=this.getFormValues(h,b);if(this.parsedNode.getAttribute("name")=="back")for(c=0;c<i.children.length;c++){h=parseInt(i.children[c].firstElementChild.getAttribute("value"));facilis.controller.FormResources.getInstance().addResource(i.children[c],h)}else c.appendChild(i)}j&&d&&this.parseEventElements(d,j);l&&e&&e.setAttribute("value",l.getAttribute("value"))}};g.getFormValues=function(a,b){if(b.firstElementChild.getAttribute("name")!=
"step")return this.getProcessForms(a,b);var c=this.parsedNode.ownerDocument.createElement("values"),d=b.children[1].firstElementChild,e={},f={order:0,pforms:[],eforms:[]};e["1"]=f;var i;if(a.firstElementChild&&!a.firstElementChild.nodeName)a=facilis.parsers.ParseInUtils.getParsedNode("<forms>"+a.firstElementChild.outerHTML+"</forms>");for(i=0;i<a.children.length;i++){var h=a.children[i];h.nodeName||(h=facilis.parsers.ParseInUtils.getParsedNode(h));if(h.getAttribute("frmStepId"))if(e[h.getAttribute("frmStepId")])f=
e[h.getAttribute("frmStepId")];else{f={order:parseInt(h.getAttribute("frmStepId")),pforms:[],eforms:[]};e[h.getAttribute("frmStepId")]=f}var j=i;if(h.getAttribute("frmOrder"))j=parseInt(h.getAttribute("frmOrder"));h.getAttribute("frmType")=="P"?f.pforms.push({order:j,form:h}):f.eforms.push({order:j,form:h})}f=[];for(var l in e)f.push(e[l]);f.sort(function(m,o){if(parseInt(m.order)==parseInt(o.order))return parseInt(m.frmOrder)-parseInt(o.frmOrder);return parseInt(m.order)-parseInt(o.order)});for(i=
i=0;i<f.length;i++){h=b.cloneNode(true);h.nodeName="value";c.appendChild(h);e=this.parsedNode.ownerDocument.createElement("values");l=this.parsedNode.ownerDocument.createElement("values");for(j=0;j<h.children.length;j++)if(h.children[j].getAttribute("name")=="stepformse"||h.children[j].getAttribute("name")=="entityforms"){h.children[j].appendChild(e);console.log("stepformse en ElementParser.as")}else if(h.children[j].getAttribute("name")=="stepformsp"||h.children[j].getAttribute("name")=="processforms"){h.children[j].appendChild(l);
console.log("stepformsp en ElementParser.as")}h=f[i].eforms;h.sort(function(m,o){if(parseInt(m.order)==parseInt(o.order))return parseInt(m.frmOrder)-parseInt(o.frmOrder);return parseInt(m.order)-parseInt(o.order)});j=0;var n;for(j=0;j<h.length;j++)(n=this.getFormValue(h[j].form,d))&&e.appendChild(n);h=f[i].pforms;h.sort(function(m,o){if(parseInt(m.order)==parseInt(o.order))return parseInt(m.frmOrder)-parseInt(o.frmOrder);return parseInt(m.order)-parseInt(o.order)});for(j=j=0;j<h.length;j++)(n=this.getFormValue(h[j].form,
d))&&l.appendChild(n)}return c};g.getProcessForms=function(a,b){for(var c=this.parsedNode.ownerDocument.createElement("values"),d=0;d<a.children.length;d++)c.appendChild(this.getFormValue(a.children[d],b));return c};g.getFormValue=function(a,b,c){if(!(a.getAttribute("name")=="undefined"&&a.getAttribute("description")=="undefined")){b=b.cloneNode(true);var d=a.getAttribute("frmId")+""!="undefined"?a.getAttribute("frmId"):"",e=a.getAttribute("frmName")+""!="undefined"?a.getAttribute("frmName"):"",f=
a.getAttribute("frmTitle")+""!="undefined"?a.getAttribute("frmTitle"):"";if(e==""&&a.getAttribute("name"))e=a.getAttribute("name")+""!="undefined"?a.getAttribute("name"):"";if(f==""&&a.attributes.description)f=a.attributes.description+""!="undefined"?a.attributes.description:"";facilis.parsers.ParseInUtils.setSubNodeValue(b,"formId",d);facilis.parsers.ParseInUtils.setSubNodeValue(b,"formName",e);facilis.parsers.ParseInUtils.setSubNodeValue(b,"formDesc",f);if(e=facilis.parsers.ParseInUtils.getSubNode(a,
"events"))(f=facilis.parsers.ParseInUtils.getSubNode(b,"frmEvents"))&&parseEventElements(f,e);b.nodeName="value";var i=facilis.parsers.ParseInUtils.getSubNode(b,"doc");if(i){e=i.firstElementChild;f=this.parsedNode.ownerDocument.createElement("values");i.appendChild(f);for(i=0;i<a.children.length;i++)if(a.children[i].nodeName=="attribute"||a.children[i].nodeName=="documentation"){var h=e.cloneNode(true);h.nodeName="value";!a.children[i].getAttribute("attName")&&a.children[i].getAttribute("name")&&
a.children[i].setAttribute("attName",a.children[i].getAttribute("name"));!a.children[i].getAttribute("attLabel")&&a.children[i].getAttribute("description")&&a.children[i].setAttribute("attLabel",a.children[i].getAttribute("description"));!a.children[i].getAttribute("regExp")&&a.children[i].getAttribute("rules")&&a.children[i].setAttribute("regExp",a.children[i].getAttribute("rules"));f.appendChild(h);facilis.parsers.ParseInUtils.setSubNodeValue(h,"fname",a.children[i].getAttribute("attName"));facilis.parsers.ParseInUtils.setSubNodeValue(h,
"description",a.children[i].getAttribute("attLabel"));facilis.parsers.ParseInUtils.setSubNodeValue(h,"tooltip",a.children[i].getAttribute("attTooltip"));facilis.parsers.ParseInUtils.setSubNodeValue(h,"datatype",a.children[i].getAttribute("datatype"));facilis.parsers.ParseInUtils.setSubNodeValue(h,"fieldtype",this.getFieldType(a.children[i].getAttribute("fieldtype")));facilis.parsers.ParseInUtils.setSubNodeValue(h,"rules",a.children[i].getAttribute("regExp"));facilis.parsers.ParseInUtils.setSubNodeValue(h,
"grid",a.children[i].getAttribute("grid"))}}if(d==""&&c){a=addFormResource(a);b.firstElementChild.setAttribute("value",a.getAttribute("resourceId"))}return b}return null};g.addFormResource=function(a){var b=facilis.View.getInstance().getMainProcessData();b=facilis.parsers.ParseInUtils.getSubNode(b,"forms").firstElementChild.cloneNode(true);a=this.getFormValue(a,b,false);if(a.children.length>1)if(facilis.controller.FormResources.getInstance().checkExists(a.children[1].getAttribute("value")))a.setAttribute("resourceId",
facilis.controller.FormResources.getInstance().getExistingId(a.children[1].getAttribute("value")));else a=facilis.controller.FormResources.getInstance().addResource(a);else a=facilis.controller.FormResources.getInstance().addResource(a);a.firstElementChild.setAttribute("value",a.getAttribute("resourceId"));return a};g.getFieldType=function(a){var b="";switch(a){case "Radio":b="Radio Button";break;case "TextArea":b="Text Area";break;case "FileInput":b="File Input";break;case "Listbox":b="ListBox";
break;case "Checkbox":b="CheckBox";break;case "Combobox":b="ComboBox";break;default:b=a}b=="Input"||b=="ComboBox"||b=="ListBox"||b=="CheckBox"||b=="Radio Button"||b=="Text Area"||b=="File Input"||b=="Editor"||b=="Password"||(b="Input");return b};g.parseEventElements=function(a,b){var c=facilis.parsers.ParseInUtils.getSubNode(a,"data"),d=this.parsedNode.ownerDocument.createElement("values");a.appendChild(d);if(b.firstElementChild&&!b.firstElementChild.nodeName)b=facilis.parsers.ParseInUtils.getParsedNode("<events>"+
b.firstElementChild.outerHTML+"</events>");for(var e=0;e<b.children.length;e++){var f=b.children[e];if(!(f.getAttribute("name")=="undefined"&&f.getAttribute("description")=="undefined")){var i=c.cloneNode(true);!f.getAttribute("busClaName")&&f.getAttribute("action")&&f.setAttribute("busClaName",f.getAttribute("action"));!f.getAttribute("evtName")&&f.getAttribute("name")&&f.setAttribute("evtName",f.getAttribute("name"));facilis.parsers.ParseInUtils.setSubNodeValue(i,"evtName",f.getAttribute("evtName")!=
"undefined"?f.getAttribute("evtName"):"");facilis.parsers.ParseInUtils.setSubNodeValue(i,"clsName",f.getAttribute("busClaName")!="undefined"?f.getAttribute("busClaName"):"");facilis.parsers.ParseInUtils.setSubNodeValue(i,"clsDesc",f.getAttribute("busClaDesc")!="undefined"?f.getAttribute("busClaDesc"):"");i.nodeName="value";d.appendChild(i)}}};g.parseCategories=function(){var a=this.getParsedSubNode("categories");if(a){var b=this.getToParseSubNode("Object");(b=facilis.parsers.ParseInUtils.getSubNode(b,
"Categories"))&&parseCategoriesNode(b,a)}};g.parseCategoriesNode=function(a,b){var c=this.parsedNode.ownerDocument.createElement("values");parseSubCategories(a,c);b.appendChild(c)};g.parseSubCategories=function(a,b){for(var c=0;c<a.children.length;c++){var d=getCategoryNode(a.children[c]);d&&b.appendChild(d)}};g.getCategoryNode=function(a){var b=this.parsedNode.ownerDocument.createElement("value"),c=this.parsedNode.ownerDocument.createElement("level");c.setAttribute("id",a.getAttribute("CategoryId"));
c.setAttribute("value",a.getAttribute("Name"));c.setAttribute("type","label");b.appendChild(c);if(a.children.length>0){c=this.parsedNode.ownerDocument.createElement("children");b.appendChild(c);parseSubCategories(a,c)}return b};g.parseProperties=function(){var a=this.getToParseSubNode("Properties"),b=this.getParsedSubNode("properties");parsePropertiesNode(a,b)};g.parsePropertiesNode=function(a,b){if(b&&a){var c=this.getData(b),d=this.parsedNode.ownerDocument.createElement("values");b.appendChild(d);
for(var e=0;e<a.children.length;e++){var f=a.children[e],i=c.cloneNode(true);i.nodeName="value";for(var h=i,j=0;j<h.children.length;j++)if(h.children[j].getAttribute("name")=="name")h.children[j].setAttribute("value",f.getAttribute("Name"));else if(h.children[j].getAttribute("name")=="id")h.children[j].setAttribute("value",f.getAttribute("PropertyId"));else if(h.children[j].getAttribute("name")=="propertytype")h.children[j].setAttribute("value",f.getAttribute("PropertyType"));else if(h.children[j].getAttribute("name")==
"value")h.children[j].setAttribute("value",f.getAttribute("Type"));else if(h.children[j].getAttribute("name")=="type")h.children[j].setAttribute("value",f.getAttribute("Value"));else if(h.children[j].getAttribute("name")=="correlation")h.children[j].setAttribute("value",f.getAttribute("Correlation"));else if(h.children[j].getAttribute("name")=="uk")h.children[j].setAttribute("value",f.getAttribute("UK"));else if(h.children[j].getAttribute("name")=="multivalued")h.children[j].setAttribute("value",
f.getAttribute("Multivalued"));else h.children[j].getAttribute("name")=="index"&&h.children[j].setAttribute("value",f.getAttribute("Index"));d.appendChild(i)}}};g.parseDataFields=function(){var a=this.getToParseSubNode("DataFields"),b=this.getParsedSubNode("properties");this.parseDataFieldsNode(a,b)};g.parseDataFieldsNode=function(a,b){if(b&&a){var c=this.getData(b),d=this.parsedNode.ownerDocument.createElement("values");b.appendChild(d);for(var e=0;e<a.children.length;e++){var f=a.children[e],i=
c.cloneNode(true);i.nodeName="value";for(var h=i,j=0;j<h.children.length;j++)if(h.children[j].getAttribute("name")=="name")h.children[j].setAttribute("value",f.getAttribute("Name"));else if(h.children[j].getAttribute("name")=="value")h.children[j].setAttribute("value",f.getAttribute("Type"));else if(h.children[j].getAttribute("name")=="type")h.children[j].setAttribute("value",f.getAttribute("Value"));else if(h.children[j].getAttribute("name")=="correlation")h.children[j].setAttribute("value",f.getAttribute("Correlation"));
else if(h.children[j].getAttribute("name")=="uk")h.children[j].setAttribute("value",f.getAttribute("UK"));else if(h.children[j].getAttribute("name")=="multivalued")h.children[j].setAttribute("value",f.getAttribute("Multivalued"));else h.children[j].getAttribute("name")=="index"&&h.children[j].setAttribute("value",f.getAttribute("Index"));d.appendChild(i)}}};g.parseUserAttributes=function(){var a=this.getToParseSubNode("ExtendedAttributes");if(a){for(var b,c=0;c<this.parsedNode.children.length;c++)if(this.parsedNode.children[c].getAttribute("id")==
"userproperties")b=this.parsedNode.children[c];if(b)if(b=facilis.parsers.ParseInUtils.getSubNode(b,"userattributes")){c=this.getData(b);for(var d=this.parsedNode.ownerDocument.createElement("values"),e=0;e<a.children.length;e++){var f=c.cloneNode(true);facilis.parsers.ParseInUtils.setSubNodeValue(f,"name",a.children[e].getAttribute("Name"));facilis.parsers.ParseInUtils.setSubNodeValue(f,"value",a.children[e].getAttribute("Value"));facilis.parsers.ParseInUtils.setSubNodeValue(f,"type",a.children[e].getAttribute("Type"));
d.appendChild(f)}b.appendChild(d)}}};g.getSubElements=function(){for(var a=0;a<this.parsedNode.children.length;a++)if(this.parsedNode.children[a].nodeName=="subElements")return this.parsedNode.children[a];a=this.parsedNode.ownerDocument.createElement("subElements");this.parsedNode.appendChild(a);return a};facilis.parsers.input.ElementParser=facilis.promote(k,"Object")})();
(function(){function k(){this.ElementParser_constructor();this.parseFunctions.push(this.getElementType);this.parseFunctions.push(this.parseAssignments);this.parseFunctions.push(this.parsePerformers);this.parseFunctions.push(this.parseProEleId)}var g=facilis.extend(k,facilis.parsers.input.ElementParser);g.startParse=function(){this.callParseFunctions();return this.parsedNode};g.getElementType=function(){var a=this.toParseNode.getAttribute("name");if(a=="gateway")this.parsedNode.setAttribute("ElementType",
"G");else if(a=="task")this.parsedNode.setAttribute("ElementType","T");else if(a=="csubflow"||a=="esubflow")this.parsedNode.setAttribute("ElementType","S");else if(a=="startevent"||a=="middleevent"||a=="endevent")this.parsedNode.setAttribute("ElementType","E")};g.parseAssignments=function(){var a=this.getToParseSubNode("Assignments"),b=this.getParsedSubNode("assignments");this.parseAssignmentsNode(a,b)};g.parseAssignmentsNode=function(a,b){if(a&&b){var c=this.getData(b),d=this.parsedNode.ownerDocument.createElement("values");
b.appendChild(d);for(var e=0;e<a.children.length;e++){var f=c.cloneNode(true);f.nodeName="value";getAssignment(a.children[e],f);d.appendChild(f)}}};g.getAssignment=function(a,b){var c=facilis.parsers.ParseInUtils.getSubNode(b,"from"),d=facilis.parsers.ParseInUtils.getSubNode(b,"to"),e=facilis.parsers.ParseInUtils.getSubNode(a,"Expression"),f=facilis.parsers.ParseInUtils.getSubNode(a,"Target");d=facilis.parsers.ParseInUtils.getSubNode(d,"values");for(var i=0;i<d.children.length;i++){var h=d.children[i].getAttribute("name");
h=="name"&&d.children[i].setAttribute("value",f.getAttribute("Name"));h=="type"&&d.children[i].setAttribute("value",f.getAttribute("Type"));h=="value"&&d.children[i].setAttribute("value",f.getAttribute("Value"));h=="correlation"&&d.children[i].setAttribute("value",f.getAttribute("Correlation"));h=="targettype"&&d.children[i].setAttribute("value",f.getAttribute("TargetType"));h=="index"&&d.children[i].setAttribute("value",f.getAttribute("Index"))}e.firstElementChild&&facilis.parsers.ParseInUtils.setSubNodeValue(c,
"expressionbody",e.firstElementChild.nodeValue);facilis.parsers.ParseInUtils.setSubNodeValue(b,"assigntime",a.getAttribute("AssignTime"))};g.parsePerformers=function(){var a=this.getToParseSubNode("Performers");if(!a){var b=this.getToParseSubNode("Performer");if(b){a=this.parsedNode.ownerDocument.createElement("Performers");a.appendChild(b)}}b=this.getParsedSubNode("performers");this.parsePerformersNode(a,b)};g.parsePerformersNode=function(a,b){if(b&&b.getAttribute("type")=="text")a&&a.firstElementChild&&
a.firstElementChild.firstElementChild&&b.setAttribute("value",a.firstElementChild.firstElementChild.nodeValue);else if(b&&a){for(var c=this.getData(b),d=this.parsedNode.ownerDocument.createElement("values"),e=0;e<a.children.length;e++){var f=c.cloneNode(true);f.nodeName="value";d.appendChild(f);var i=a.children[e],h=i.getAttribute("PerfName"),j=i.getAttribute("PerfId");if(!j&&i.firstElementChild){j=i.firstElementChild.nodeValue;var l=facilis.parsers.ParserIn.getParticipantByIdOrName(j);if(l)j=l.id}if(!h)if(l=
facilis.parsers.ParserIn.getParticipantById(j))h=l.name;l=facilis.parsers.ParseInUtils.getSubNode(i,"Documentation");var n=facilis.parsers.ParseInUtils.getSubNode(f,"documentation");l&&n&&parseDocumentationNode(l,n);facilis.parsers.ParseInUtils.setSubNodeValue(f,"perfid",j);facilis.parsers.ParseInUtils.setSubNodeValue(f,"perfname",h);if((j=facilis.parsers.ParseInUtils.getSubNode(f,"condition"))&&i.getAttribute("ProElePerfEvalCond")){l=this.parsedNode.ownerDocument.createElement("values");n=this.parsedNode.ownerDocument.createElement("value");
var m=this.parsedNode.ownerDocument.createTextNode(i.getAttribute("ProElePerfEvalCond"));n.appendChild(m);l.appendChild(n);j.appendChild(l)}if((j=facilis.parsers.ParseInUtils.getSubNode(f,"documentation"))&&i.getAttribute("ConditionDoc")){l=this.parsedNode.ownerDocument.createElement("values");n=this.parsedNode.ownerDocument.createElement("value");i=this.parsedNode.ownerDocument.createTextNode(i.getAttribute("ConditionDoc"));n.appendChild(i);l.appendChild(n);j.appendChild(l)}h=="busClass"&&f.removeNode()}b.appendChild(d)}};
g.parseWebServiceCatchNode=function(a,b){parseCatchWs(a,b)};g.parseCatchWs=function(a,b){a.firstElementChild&&parseWs(a.firstElementChild,b)};g.parseWs=function(a,b){var c=b.firstElementChild;c.children[0].setAttribute("value",a.getAttribute("ws_method_name"));var d=c.children[1],e=this.parsedNode.ownerDocument.createElement("values");d.appendChild(e);c=c.children[2];var f=this.parsedNode.ownerDocument.createElement("values");c.appendChild(f);for(var i=0;i<a.children.length;i++){var h;if(a.children[i].getAttribute("attribute_type")==
"E"){h=this.getData(c).cloneNode(true);f.appendChild(h)}else{h=this.getData(d).cloneNode(true);e.appendChild(h)}h.nodeName="value";facilis.parsers.ParseInUtils.setSubNodeValue(h,"id",a.children[i].getAttribute("attribute_id"));facilis.parsers.ParseInUtils.setSubNodeValue(h,"name",a.children[i].getAttribute("name"));facilis.parsers.ParseInUtils.setSubNodeValue(h,"uk",(a.children[i].getAttribute("attribute_uk")=="T").toString());facilis.parsers.ParseInUtils.setSubNodeValue(h,"multivalued",(a.children[i].getAttribute("multivalued")==
"T").toString())}};g.parseEvents=function(a,b){if(b){var c=this.getData(b),d=this.parsedNode.ownerDocument.createElement("values");if(a){for(var e=0;e<a.children.length;e++){var f=c.cloneNode(true);f.nodeName="value";if(!a.children[e].getAttribute("WS")||a.children[e].getAttribute("WS")=="false")(f=parseEventClass(a.children[e],f))&&d.appendChild(f)}b.appendChild(d)}}};g.parseEventClass=function(a,b){if(a.getAttribute("BusClaName")=="BPMNAutoComplete")return null;facilis.parsers.ParseInUtils.getSubNode(b,
"evtid").setAttribute("value",a.getAttribute("EvtId"));facilis.parsers.ParseInUtils.getSubNode(b,"clsid").setAttribute("value",a.getAttribute("BusClaId"));facilis.parsers.ParseInUtils.getSubNode(b,"evtname").setAttribute("value",a.getAttribute("EvtName"));facilis.parsers.ParseInUtils.getSubNode(b,"clsname").setAttribute("value",a.getAttribute("BusClaName"));setSkipCondition(facilis.parsers.ParseInUtils.getSubNode(b,"skipcondition"),a.getAttribute("SkipCond"));this.getParsedSubNode("binding");parseBindings(facilis.parsers.ParseInUtils.getSubNode(a,
"BusClaParBindings"),facilis.parsers.ParseInUtils.getSubNode(b,"binding"));return b};g.setSkipCondition=function(a,b){var c=this.parsedNode.ownerDocument.createElement("values"),d=this.parsedNode.ownerDocument.createElement("value");d.setAttribute("value",b);c.appendChild(d);d.appendChild(this.parsedNode.ownerDocument.createTextNode(b));a.appendChild(c);a.setAttribute("value",d.getAttribute("value"))};g.parseBindings=function(a,b){var c=this.getData(b),d=this.parsedNode.ownerDocument.createElement("values");
if(a){for(var e=0;e<a.children.length;e++){var f=c.cloneNode(true);f.nodeName="value";d.appendChild(f);facilis.parsers.ParseInUtils.getSubNode(f,"id").setAttribute("value",a.children[e].getAttribute("BusClaParId"));facilis.parsers.ParseInUtils.getSubNode(f,"param").setAttribute("value",a.children[e].getAttribute("BusClaParName"));facilis.parsers.ParseInUtils.getSubNode(f,"type").setAttribute("value",a.children[e].getAttribute("BusClaParType"));facilis.parsers.ParseInUtils.getSubNode(f,"value").setAttribute("value",
a.children[e].getAttribute("BusClaParBndValue")?a.children[e].getAttribute("BusClaParBndValue"):"");facilis.parsers.ParseInUtils.getSubNode(f,"attribute").setAttribute("value",a.children[e].getAttribute("AttName")?a.children[e].getAttribute("AttName"):"");facilis.parsers.ParseInUtils.getSubNode(f,"attribute").getAttribute("atttype")=a.children[e].getAttribute("BusClaParBndType")+""=="P"?"process":"entity";facilis.parsers.ParseInUtils.getSubNode(f,"attributeid").setAttribute("value",a.children[e].getAttribute("AttId")?
a.children[e].getAttribute("AttId"):"");facilis.parsers.ParseInUtils.getSubNode(f,"attributetooltip").setAttribute("value",a.children[e].getAttribute("AttTooltip")?a.children[e].getAttribute("AttTooltip"):"")}b.appendChild(d)}};g.parseWebServiceThrowNode=function(a,b){parseThrowWs(b)};g.parseThrowWs=function(a){a=facilis.parsers.ParseInUtils.getSubNode(a,"wsclasses");var b=this.getData(a),c=this.getToParseSubNode("ApiaEvents"),d=this.parsedNode.ownerDocument.createElement("values");if(c&&c.children.length>
0&&a){for(var e=0;e<c.children.length;e++){var f=b.cloneNode(true);f.nodeName="value";f=parseWsEventClass(c.children[e],f);c.children[e].getAttribute("WS")&&c.children[e].getAttribute("WS")=="true"&&c.children[e].getAttribute("BusClaId")!="102"&&d.appendChild(f)}a.appendChild(d)}};g.parseWsEventClass=function(a,b){facilis.parsers.ParseInUtils.getSubNode(b,"evtid").setAttribute("value",a.getAttribute("EvtId"));facilis.parsers.ParseInUtils.getSubNode(b,"clsid").setAttribute("value",a.getAttribute("BusClaId"));
facilis.parsers.ParseInUtils.getSubNode(b,"evtname").setAttribute("value",a.getAttribute("EvtName"));facilis.parsers.ParseInUtils.getSubNode(b,"clsname").setAttribute("value",a.getAttribute("BusClaName"));this.getParsedSubNode("binding");parseWsBindings(facilis.parsers.ParseInUtils.getSubNode(a,"BusClaParBindings"),facilis.parsers.ParseInUtils.getSubNode(b,"binding"));return b};g.parseWsBindings=function(a,b){var c=this.getData(b),d=this.parsedNode.ownerDocument.createElement("values");if(a){for(var e=
0;e<a.children.length;e++){var f=c.cloneNode(true);f.nodeName="value";d.appendChild(f);facilis.parsers.ParseInUtils.setSubNodeValue(f,"id",a.children[e].getAttribute("BusClaParId"));facilis.parsers.ParseInUtils.setSubNodeValue(f,"param",a.children[e].getAttribute("BusClaParName"));facilis.parsers.ParseInUtils.setSubNodeValue(f,"type",a.children[e].getAttribute("BusClaParType"));facilis.parsers.ParseInUtils.setSubNodeValue(f,"value",a.children[e].getAttribute("BusClaParBndValue"));if(facilis.parsers.ParseInUtils.getSubNode(f,
"attribute")){facilis.parsers.ParseInUtils.getSubNode(f,"attribute").setAttribute("value",a.children[e].getAttribute("AttName")?a.children[e].getAttribute("AttName"):"");facilis.parsers.ParseInUtils.getSubNode(f,"attribute").getAttribute("atttype")=a.children[e].getAttribute("BusClaParBndType")+""=="P"?"process":"entity"}facilis.parsers.ParseInUtils.setSubNodeValue(f,"attributeid",a.children[e].getAttribute("AttId")?a.children[e].getAttribute("AttId"):"");facilis.parsers.ParseInUtils.setSubNodeValue(f,
"uk",a.children[e].getAttribute("UK"));facilis.parsers.ParseInUtils.setSubNodeValue(f,"multivalued",a.children[e].getAttribute("Multivalued"))}b.appendChild(d)}};g.getWsPublications=function(){var a=this.getToParseSubNode("WsPublications");if(a){var b=this.getData(this.getParsedSubNode("webservices"));this.parsedNode.ownerDocument.createElement("values");if(b)for(var c=0;c<a.children.length;c++){var d=a.children[c],e=b.cloneNode(true);e.nodeName="value";facilis.parsers.ParseInUtils.getSubNode(e,"wsname").setAttribute("value",
d.getAttribute("WsName"));d=facilis.parsers.ParseInUtils.getSubNode(d,"WsPublicationAttributes");var f=facilis.parsers.ParseInUtils.getSubNode(e,"entityattributes");e=facilis.parsers.ParseInUtils.getSubNode(e,"processattributes");if(d){var i=this.parsedNode.ownerDocument.createElement("values"),h=this.parsedNode.ownerDocument.createElement("values");f.appendChild(i);e.appendChild(h);f=this.getData(f);for(e=0;e<d.children.length;e++)parseWSAttribute(f,d.children[e])}}}};g.parseWSAttribute=function(a,
b){a.cloneNode(true);if(b)for(var c=0;c<b.children.length;c++);};g.parseProEleId=function(){var a=this.toParseNode.getAttribute("Id");a&&this.parsedNode.setAttribute("proeleid",a)};facilis.parsers.input.Activity=facilis.promote(k,"ElementParser")})();
(function(){function k(){this.Activity_constructor();this.parseFunctions.push(this.getLoopType)}facilis.extend(k,facilis.parsers.input.Activity).getLoopType=function(){var g=this.getToParseSubNode("Loop");if(g&&g.attributes.LoopType){var a=g.attributes.LoopType;this.setParsedSubNodeValue("looptype",a);var b=g.firstElementChild;if(a=="Standard"){g=b.attributes.LoopMaximum;a=b.attributes.LoopCounter;this.setParsedSubNodeValue("testTime",b.attributes.TestTime);this.setParsedSubNodeValue("loopmaximum",
g);this.setParsedSubNodeValue("loopcounter",a);a=this.getParsedSubNode("loopcondition");g=this.getParsedSubNode("loopdocumentation");if(a&&b.attributes.LoopCondition){var c=this.parsedNode.ownerDocument.createElement("values"),d=this.parsedNode.ownerDocument.createElement("value"),e=this.parsedNode.ownerDocument.createTextNode(b.attributes.LoopCondition);d.appendChild(e);d.attributes.value=b.attributes.LoopCondition;c.appendChild(d);a.appendChild(c);a.attributes.value=b.attributes.LoopCondition}if(g&&
b.attributes.ConditionDoc){a=this.parsedNode.ownerDocument.createElement("values");c=this.parsedNode.ownerDocument.createElement("value");d=this.parsedNode.ownerDocument.createTextNode(b.attributes.ConditionDoc);c.appendChild(d);c.attributes.value=b.attributes.ConditionDoc;a.appendChild(c);g.appendChild(a)}}else if(a=="MultiInstance")if(b=facilis.parsers.ParseInUtils.getSubNode(g,"LoopMultiInstance")){g=this.getParsedSubNode("mi_condition");if(b.attributes.MultiplierAttId){a=this.parsedNode.ownerDocument.createElement("level");
c=this.parsedNode.ownerDocument.createElement("level");a.attributes.name="id";c.attributes.name="name";a.attributes.value=b.attributes.MultiplierAttId;c.attributes.value=b.attributes.MultiplierAttName;d=this.parsedNode.ownerDocument.createElement("values");e=this.parsedNode.ownerDocument.createElement("value");e.appendChild(a);e.appendChild(c);d.appendChild(e);g.appendChild(d);g.attributes.value=b.attributes.MultiplierAttName}else b.attributes.MI_Condition&&Utils.isNumeric(b.attributes.MI_Condition)&&
this.setParsedSubNodeValue("mi_condition",b.attributes.MI_Condition);if((g=this.getParsedSubNode("mi_ordering"))&&b.attributes.MI_Ordering)g.attributes.value=b.attributes.MI_Ordering}}};facilis.parsers.input.ActivityElement=facilis.promote(k,"Activity")})();
(function(){function k(){this.ElementParser_constructor();this.parseFunctions.push(this.getTextAnnotation);this.parseFunctions.push(this.getState);this.parseFunctions.push(this.getName);this.parseFunctions.push(this.getIsCollection);this.parseFunctions.push(this.getCapacity);this.parseFunctions.push(this.getIsUnlimited)}var g=facilis.extend(k,facilis.parsers.input.ElementParser);g.startParse=function(){this.callParseFunctions();return this.parsedNode};g.getTextAnnotation=function(){var a=this.toParseNode.attributes.TextAnnotation;
a&&this.setParsedSubNodeValue("text",a)};g.getName=function(){if(this.toParseNode.attributes.Name){var a=this.toParseNode.attributes.Name;a!=null&&this.setParsedSubNodeValue("name",a)}};g.getState=function(){if(this.toParseNode.firstElementChild){var a=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"DataObject");if(a){a=a.attributes.State;a!=null&&this.setParsedSubNodeValue("state",a)}}};g.getIsCollection=function(){if(this.toParseNode.firstElementChild){var a;if(a=this.toParseNode.nodeName.indexOf("DataInput")>=
0?this.toParseNode:facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"DataObject")){a=a.getAttribute("IsCollection");a!=null&&this.setParsedSubNodeValue("isCollection",a)}}};g.getCapacity=function(){var a=this.toParseNode.getAttribute("Capacity");a&&this.setParsedSubNodeValue("capacity",a)};g.getIsUnlimited=function(){var a=this.toParseNode.getAttribute("IsUnlimited");a&&this.setParsedSubNodeValue("isUnlimited",a)};facilis.parsers.input.Artifact=facilis.promote(k,"ElementParser")})();
(function(){function k(){this.ElementParser_constructor();this.parseFunctions.push(this.getStartEnd);this.parseFunctions.push(this.getVertexes)}var g=facilis.extend(k,facilis.parsers.input.ElementParser);g.startParse=function(){this.callParseFunctions();return this.parsedNode};g.getStartEnd=function(){var a=this.toParseNode.getAttribute("From"),b=this.toParseNode.getAttribute("To");a||(a=this.toParseNode.getAttribute("Source"));b||(b=this.toParseNode.getAttribute("Target"));this.parsedNode.setAttribute("startid",
a);this.parsedNode.setAttribute("endid",b)};g.getVertexes=function(){var a=this.getToParseSubNode("ConnectorGraphicsInfo");if(a){a=a.cloneNode(true);for(var b=this.parsedNode.ownerDocument.createElement("vertex"),c=0;c<a.children.length;c++)b.appendChild(a.children[c].cloneNode(true));this.parsedNode.appendChild(b)}};facilis.parsers.input.Line=facilis.promote(k,"ElementParser")})();
(function(){function k(){this.Line_constructor();this.parseFunctions.push(this.getDirection)}facilis.extend(k,facilis.parsers.input.Line).getDirection=function(){this.setParsedSubNodeValue("direction",this.toParseNode.getAttribute("AssociationDirection"));if(this.toParseNode.getAttribute("AssociationDirection")=="To"){this.toParseNode.setAttribute("AssociationDirection","From");var g=this.parsedNode.getAttribute("startid");this.parsedNode.setAttribute("startid",this.parsedNode.getAttribute("endid"));
this.parsedNode.setAttribute("endid",g)}};facilis.parsers.input.Association=facilis.promote(k,"Line")})();(function(){function k(){this.ElementParser_constructor()}facilis.extend(k,facilis.parsers.input.ElementParser);facilis.parsers.input.Lane=facilis.promote(k,"ElementParser")})();
(function(){function k(){this.ElementParser_constructor();this.parseFunctions.push(this.getRoute);this.parseFunctions.push(this.getInstantiate);this.parseFunctions.push(this.getExclusiveType);this.parseFunctions.push(this.getMarkerVisible);this.parseFunctions.push(this.getIncomingCondition);this.parseFunctions.push(this.getOutgoingCondition);this.parseFunctions.push(this.parseExecutionType)}var g=facilis.extend(k,facilis.parsers.input.ElementParser);g.getRoute=function(){(Route=this.getToParseSubNode("Route"))||
(Route=this.getToParseSubNode("Gateway"));if(Route){var a=Route.getAttribute("GatewayType");if(facilis.View.getInstance().offline){if(a=="AND")a="Parallel";if(a=="XOR")a="Exclusive";if(a=="OR")a="Inclusive"}a&&this.setParsedSubNodeValue("gatewaytype",a)}};g.getInstantiate=function(){Route&&Route.attributes.Instantiate&&this.setParsedSubNodeValue("instantiate",Route.getAttribute("Instantiate"))};g.getExclusiveType=function(){Route&&Route.attributes.ExclusiveType&&this.setParsedSubNodeValue("exclusivetype",
Route.getAttribute("ExclusiveType"))};g.getMarkerVisible=function(){Route&&Route.attributes.MarkerVisible&&this.setParsedSubNodeValue("markervisible",Route.getAttribute("MarkerVisible"))};g.getIncomingCondition=function(){var a=this.getParsedSubNode("incomingcondition");if(Route&&Route.attributes.IncomingCondition){var b=this.parsedNode.ownerDocument.createElement("values"),c=this.parsedNode.ownerDocument.createElement("value");c.attributes.value=Route.getAttribute("IncomingCondition");c.appendChild(this.parsedNode.ownerDocument.createTextNode(Route.getAttribute("IncomingCondition")));
b.appendChild(c);a.appendChild(b)}};g.getOutgoingCondition=function(){var a=this.getParsedSubNode("outgoingcondition");if(Route&&Route.attributes.OutgoingCondition){var b=this.parsedNode.ownerDocument.createElement("values"),c=this.parsedNode.ownerDocument.createElement("value");c.setAttribute("value",Route.getAttribute("OutgoingCondition"));c.appendChild(this.parsedNode.ownerDocument.createTextNode(Route.getAttribute("OutgoingCondition")));b.appendChild(c);a.appendChild(b)}};g.parseExecutionType=
function(){var a=this.getParsedSubNode("executiontype");if(a)a.attributes.value=Route.getAttribute("ExecutionType")};facilis.parsers.input.Gateway=facilis.promote(k,"ElementParser")})();
(function(){function k(){this.Activity_constructor();this.parseFunctions.push(this.getProcess);this.parseFunctions.push(this.getBoundary);this.parseFunctions.push(this.getLanes);this.parseFunctions.push(this.parseParticipant)}var g=facilis.extend(k,facilis.parsers.input.Activity);g.getLanes=function(){if(this.toParseNode.attributes.BoundaryVisible!="false")for(var a=0;a<this.toParseNode.children.length;a++)this.toParseNode.children[a].localName=="Lanes"&&this.parseLanes(this.toParseNode.children[a])};
g.getProcess=function(){var a=this.toParseNode.getAttribute("Process");a!=null&&this.parsedNode.setAttribute("process",a)};g.getBoundary=function(){var a=this.toParseNode.attributes.BoundaryVisible;if(a=="false")this.parsedNode.attributes.visible="false";a!=null?this.setParsedSubNodeValue("boundaryvisible",a):this.setParsedSubNodeValue("boundaryvisible","true")};g.parseLanes=function(a){for(var b=new facilis.parsers.ParserIn,c=this.getSubElements(),d=0;d<a.children.length;d++){var e=b.getElementParser("swimlane");
e.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes("swimlane"));e=e.parse(a.children[d]);c.appendChild(e)}};g.parseParticipant=function(){var a=this.getToParseSubNode("participantref");if(a&&this.toParseNode.attributes.Participant){var b=getParsedNode('<values><value value="'+this.toParseNode.attributes.Participant+'"><level name="name" value="'+this.toParseNode.attributes.Participant+'" /></value></values>');a.appendChild(b);a.attributes.value=this.toParseNode.attributes.Participant}};
facilis.parsers.input.Pool=facilis.promote(k,"Activity")})();
(function(){function k(){this.ActivityElement_constructor();this.parseFunctions.push(this.getImplementation);this.parseFunctions.push(this.getIsTransaction);this.parseFunctions.push(this.getBlockActivity);this.parseFunctions.push(this.getIsExpanded);this.parseFunctions.push(this.getExecution);this.parseFunctions.push(this.getDataMappings);this.parseFunctions.push(this.parseSkipFirstTask);this.parseFunctions.push(this.getPrcName);this.parseFunctions.push(this.getFormsRef);this.parseFunctions.push(this.getEntity)}
var g=facilis.extend(k,facilis.parsers.input.ActivityElement);g.getImplementation=function(){};g.getIsTransaction=function(){var a=this.toParseNode.getAttribute("IsATransaction");if(a!="false"){this.setParsedSubNodeValue("transaction",a);(a=this.getToParseSubNode("Transaction"))&&this.setParsedSubNodeValue("transactionid",a.attributes.Id.value)}};g.getIsAdhoc=function(){var a=this.toParseNode.attributes.AdHoc.value;if(a!="false"){this.setParsedSubNodeValue("adhoc",a);(a=this.toParseNode.attributes.AdHocOrdering.value)&&
this.setParsedSubNodeValue("adhocordering",a)}};g.getBlockActivity=function(){var a=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"BlockActivity");if(a){a=a.attributes.ActivitySetId.value;var b=this.getParsedSubNode("name");if(b){var c=b.children[1];if(c&&c.firstElementChild){c=c.firstElementChild;for(var d=0;d<c.children.length;d++){if(c.children[d].attributes.name.value=="id")c.children[d].attributes.value.value=a;if(c.children[d].attributes.name.value=="name"){c.children[d].attributes.value.value=
b.attributes.value.value;c.attributes.value.value=b.attributes.value.value}}}}}};g.getIsExpanded=function(){var a=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"NodeGraphicsInfo");if(a){var b=a.getAttribute("Expanded");if(b=="true"){this.parsedNode.attributes.expanded.value=b;if(a.attributes.ExpandedWidth.value&&a.attributes.ExpandedHeight.value){this.parsedNode.attributes.width.value=a.attributes.ExpandedWidth.value;this.parsedNode.attributes.height.value=a.attributes.ExpandedHeight.value}}}};
g.getExecution=function(){var a=this.getToParseSubNode("SubFlow");if(a)if(a.getAttribute("ApiaExecution")=="MAP")this.setParsedSubNodeValue("subprocesstype","Embedded");else{this.setParsedSubNodeValue("subprocesstype","Reusable");if((a=a.getAttribute("ApiaExecution"))&&a.indexOf("_SKIP")>0)a=a.split("_")[0];this.setParsedSubNodeValue("execution",a)}};g.getDataMappings=function(){var a=this.getToParseSubNode("DataMappings"),b=this.getParsedSubNode("datamappings");if(a&&b){var c=facilis.parsers.ParseInUtils.getSubNode(b,
"inputmaps"),d=this.getData(c),e=this.parsedNode.ownerDocument.createElement("values");c.appendChild(e);var f=facilis.parsers.ParseInUtils.getSubNode(b,"outputmaps");b=this.getData(f);c=this.parsedNode.ownerDocument.createElement("values");f.appendChild(c);for(var i=0;i<a.children.length;i++){var h=a.children[i];if(h.attributes.Direction.value=="IN"){f=d.cloneNode(true);f.nodeName="value";e.appendChild(f);facilis.parsers.ParseInUtils.setSubNodeValue(f,"inputmap",h.attributes.TestValue.value)}else{f=
b.cloneNode(true);f.nodeName="value";c.appendChild(f);facilis.parsers.ParseInUtils.setSubNodeValue(f,"outputmap",h.attributes.TestValue.value)}}}};g.parseSkipFirstTask=function(){var a=this.getToParseSubNode("SubFlow");a&&facilis.parsers.ParseInUtils.setSubNodeValue(this.parsedNode,"skipfirsttask",a.getAttribute("SkipFirstTask"))};g.getPrcName=function(){var a=this.getToParseSubNode("SubFlow");facilis.parsers.ParseInUtils.setSubNodeValue(this.parsedNode,"name",this.toParseNode.getAttribute("Name"));
if(a){var b=a.getAttribute("Name");b.indexOf(".xpdl")>0&&facilis.parsers.ParseInUtils.setSubNodeValue(this.parsedNode,"filename",b);if(b=facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"name")){var c=facilis.parsers.ParseInUtils.getSubNode(b,"values");c&&c.removeNode();c=this.parsedNode.ownerDocument.createElement("values");c.setAttribute("value",this.toParseNode.getAttribute("Name"));a=facilis.parsers.ParseInUtils.getParsedNode('<value value="'+this.toParseNode.getAttribute("Name")+'"><level name="id" type="label" value="'+
a.attributes.Id.value+'" /><level name="name" type="label" value="'+this.toParseNode.getAttribute("Name")+'" /></value>');c.appendChild(a);b.attributes.value.value=this.toParseNode.getAttribute("Name");b.appendChild(c)}}};g.getEntity=function(){var a=this.getToParseSubNode("SubFlow");if(a){var b=facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"entity");if(b&&a.attributes.ProEleAttBusEntName.value&&a.attributes.ProEleAttBusEntId.value){var c=this.parsedNode.ownerDocument.createElement("values"),
d=facilis.parsers.ParseInUtils.getParsedNode('<value value="'+a.attributes.ProEleAttBusEntName.value+'"><level name="id" type="label" value="'+a.attributes.ProEleAttBusEntId.value+'" /><level name="name" type="label" value="'+a.attributes.ProEleAttBusEntName.value+'" /></value>');c.appendChild(d);b.setAttribute("value",a.attributes.ProEleAttBusEntName.value);b.appendChild(c)}}};g.getFormsRef=function(){var a=this.getParsedSubNode("processforms"),b=this.getParsedSubNode("entityforms");if(a&&b){var c=
this.getToParseSubNode("FormsRef"),d=this.getData(a),e=this.getData(b),f=this.parsedNode.ownerDocument.createElement("values"),i=this.parsedNode.ownerDocument.createElement("values");a.appendChild(i);b.appendChild(f);b=[];a=[];var h;if(c){for(var j=0;j<c.children.length;j++)if(c.children[j].attributes.FrmType.value=="E"){h=parseInt(c.children[j].attributes.ProEleFrmOrder.value);var l=parseFormRef(c.children[j],e);b.push({order:h,data:l})}else{h=parseInt(c.children[j].attributes.ProEleFrmOrder.value);
l=parseFormRef(c.children[j],d);a.push({order:h,data:l})}b.sortOn("order",Array.NUMERIC);a.sortOn("order",Array.NUMERIC);for(c=0;c<b.length;c++)f.appendChild(b[c].data);for(f=0;f<a.length;f++)i.appendChild(a[f].data)}}};g.parseFormRef=function(a,b){var c=b.cloneNode(true);c.nodeName="value";facilis.parsers.ParseInUtils.setSubNodeValue(c,"id",a.attributes.FrmId.value);facilis.parsers.ParseInUtils.setSubNodeValue(c,"name",a.attributes.FrmName.value);facilis.parsers.ParseInUtils.setSubNodeValue(c,"readonly",
a.attributes.ProEleFrmReadOnly.value);facilis.parsers.ParseInUtils.setSubNodeValue(c,"multiple",a.attributes.ProEleFrmMultiply.value);if(a.attributes.ProEleFrmEvalCond.value){var d=this.parsedNode.ownerDocument.createElement("values"),e=this.parsedNode.ownerDocument.createElement("value");d.appendChild(e);e.appendChild(this.parsedNode.ownerDocument.createTextNode(a.attributes.ProEleFrmEvalCond.value));(e=facilis.parsers.ParseInUtils.getSubNode(c,"condition"))&&e.appendChild(d)}if(a.attributes.ConditionDoc.value){d=
this.parsedNode.ownerDocument.createElement("values");e=this.parsedNode.ownerDocument.createElement("value");d.appendChild(e);e.appendChild(this.parsedNode.ownerDocument.createTextNode(a.attributes.ConditionDoc.value));(e=facilis.parsers.ParseInUtils.getSubNode(c,"documentation"))&&e.appendChild(d)}return c};facilis.parsers.input.Subflow=facilis.promote(k,"ActivityElement")})();
(function(){function k(){this.Activity_constructor();this.parseFunctions.push(this.getProcess);this.parseFunctions.push(this.getBoundary);this.parseFunctions.push(this.getLanes);this.parseFunctions.push(this.parseBack);this.parseFunctions.push(this.getProcesClasses)}var g=facilis.extend(k,facilis.parsers.input.Activity);g.getLanes=function(){for(var a=0;a<this.toParseNode.children.length;a++)this.toParseNode.children[a].nodeName=="Lanes"&&this.parseLanes(this.toParseNode.children[a])};g.getProcess=
function(){var a=this.toParseNode.getAttribute("Process");a!=null&&this.parsedNode.setAttribute("process",a)};g.getBoundary=function(){var a=this.toParseNode.attributes.BoundaryVisible;a!=null?this.setParsedSubNodeValue("boundaryvisible",a):this.setParsedSubNodeValue("boundaryvisible","true")};g.parseLanes=function(a){for(var b=new facilis.parsers.ParserIn,c=this.getSubElements(),d=0;d<a.children.length;d++){var e=b.getElementParser("swimlane");e.setParsedNode(facilis.ElementAttributeController.getInstance().getElementAttributes("swimlane"));
e=e.parse(a.children[d]);c.appendChild(e)}};g.parseBack=function(){if(this.toParseNode&&this.toParseNode.parentNode&&this.toParseNode.parentNode.parentNode){var a=this.toParseNode.parentNode.parentNode,b=facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"bpd");if(b){facilis.parsers.ParseInUtils.setSubNodeValue(b,"id",a.attributes.Id.value);facilis.parsers.ParseInUtils.setSubNodeValue(b,"name",a.attributes.Name.value);facilis.parsers.ParseInUtils.setSubNodeValue(b,"language",a.attributes.Language.value);
var c=facilis.parsers.ParseInUtils.getSubNode(a,"RedefinableHeader");if(c){facilis.parsers.ParseInUtils.setSubNodeValue(b,"version",c.attributes.Version.value);facilis.parsers.ParseInUtils.setSubNodeValue(b,"author",c.attributes.Author.value)}(c=facilis.parsers.ParseInUtils.getSubNode(a,"Created"))&&facilis.parsers.ParseInUtils.setSubNodeValue(b,"creationdate",c.attributes.CreationDate.value);(c=facilis.parsers.ParseInUtils.getSubNode(a,"ModificationDate"))&&facilis.parsers.ParseInUtils.setSubNodeValue(b,
"modificationdate",c.attributes.Date.value)}var d=facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"process");if(d){facilis.parsers.ParseInUtils.getSubNodeValue(d,"processtype");c=facilis.parsers.ParseInUtils.getSubNode(d,"performers");b=facilis.parsers.ParseInUtils.getSubNode(d,"properties");facilis.parsers.ParseInUtils.setSubNodeValue(d,"processtype",a.attributes.ProcessType.value);(d=facilis.parsers.ParseInUtils.getSubNode(a,"Performers"))&&parsePerformers(d,c);(a=facilis.parsers.ParseInUtils.getSubNode(a,
"Properties"))&&parsePropertiesNode(a,b)}}};g.parsePerformers=function(a,b){var c=this.getData(b),d=this.parsedNode.ownerDocument.createElement("values");if(a){for(var e=0;e<a.children.length;e++){var f=c.cloneNode(true);f.nodeName="value";d.appendChild(f);var i=a.children[e];facilis.parsers.ParseInUtils.getSubNode(f,"perfid").attributes.value=i.attributes.PerfId;facilis.parsers.ParseInUtils.getSubNode(f,"perfname").attributes.value=i.attributes.PerfName;if(f=facilis.parsers.ParseInUtils.getSubNode(f,
"condition")){var h=this.parsedNode.ownerDocument.createElement("values"),j=this.parsedNode.ownerDocument.createElement("value");i=this.parsedNode.ownerDocument.createTextNode(i.attributes.ProElePerfEvalCond);j.appendChild(i);h.appendChild(j);f.appendChild(h)}}b.appendChild(d)}};g.getProcesClasses=function(){var a=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"ApiaProEvents");if(a){var b=facilis.parsers.ParseInUtils.getSubNode(parsedNode,"bussinessclasses");parseEvents(a,b)}};facilis.parsers.input.Back=
facilis.promote(k,"Activity")})();
(function(){function k(){this.Activity_constructor();this.parseFunctions.push(this.getAttached);this.parseFunctions.push(this.getEvent);this.parseFunctions.push(this.getTrigger);this.parseFunctions.push(this.getTriggerElement)}var g=facilis.extend(k,facilis.parsers.input.Activity);g.getEvent=function(){this.toParseNode.getAttribute("name");var a=(this.getToParseSubNode("BPMNEvent")?this.getToParseSubNode("BPMNEvent"):this.getToParseSubNode("Event")).firstElementChild.localName;this.parsedNode.setAttribute("name",
a=="StartEvent"?"startevent":a=="IntermediateEvent"?"middleevent":"endevent")};g.getTrigger=function(){var a=this.getToParseSubNode("BPMNEvent")?this.getToParseSubNode("BPMNEvent"):this.getToParseSubNode("Event"),b=a.firstElementChild.getAttribute("Trigger")?a.firstElementChild.getAttribute("Trigger"):"";if(a.firstElementChild.getAttribute("Result"))b=a.firstElementChild.getAttribute("Result");this.setParsedSubNodeValue("eventdetailtype",b)};g.getTriggerElement=function(){var a=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,
"TriggerMultiple"),b=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"TriggerResultMessage"),c=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"TriggerTimer"),d=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"TriggerConditional"),e=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"TriggerResultSignal"),f=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"ResultError"),i=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"TriggerResultCompensation");
if(a)this.parseMultipleTrigger(a,facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"multiple"));else if(b)this.parseMessageTrigger(b,facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"message"));else if(c)this.parseTimerTrigger(c,facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"timer"));else if(d)this.parseConditionalTrigger(d,facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"conditional"));else if(e)this.parseConditionalTrigger(e,facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,
"signal"));else if(f)this.parseErrorTrigger(f,facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"error"));else i&&this.parseCompensationTrigger(i,facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"compensation"))};g.getAttached=function(){var a=this.getToParseSubNode("IntermediateEvent");if(a&&(a.getAttribute("IsAttached")=="true"||a.getAttribute("Target"))){this.parsedNode.setAttribute("target",a.getAttribute("Target"));this.parsedNode.setAttribute("isattached","true")}else a&&this.parsedNode.firstElementChild.firstElementChild.setAttribute("value",
"FALSE")};g.parseMessageTrigger=function(a,b){var c;if(a){facilis.parsers.ParseInUtils.setSubNodeValue(b,"name",a.getAttribute("Name"));facilis.parsers.ParseInUtils.setSubNodeValue(b,"implementation",this.toParseNode.getAttribute("Implementation"));if(b&&this.parsedNode.getAttribute("name")=="middleevent"){b.setAttribute("disabled","false");var d=facilis.parsers.ParseInUtils.getSubNode(b,"outmessageref"),e=facilis.parsers.ParseInUtils.getSubNode(b,"inmessageref");if(c=facilis.parsers.ParseInUtils.getSubNode(a,
"WebServiceMapping")){d&&d.setAttribute("disabled","true");parseWebServiceCatchNode(c,e);facilis.parsers.ParseInUtils.setSubNodeValue(b,"catchthrow","CATCH")}else{e&&e.setAttribute("disabled","true");facilis.parsers.ParseInUtils.setSubNodeValue(b,"catchthrow","THROW");parseWebServiceThrowNode(null,d)}a.getAttribute("CatchThrow")&&facilis.parsers.ParseInUtils.setSubNodeValue(b,"catchthrow",(a.getAttribute("CatchThrow")+"").toUpperCase())}else if(!b&&this.parsedNode.getAttribute("name")=="middleevent")facilis.parsers.ParseInUtils.setSubNodeValue(this.parsedNode,
"catchthrow",(a.getAttribute("CatchThrow")+"").toUpperCase());else if(this.parsedNode.getAttribute("name")=="endevent"){facilis.parsers.ParseInUtils.getSubNode(a,"WebServiceThrow");parseWebServiceThrowNode(null,b)}else(c=facilis.parsers.ParseInUtils.getSubNode(a,"WebServiceMapping"))&&parseWebServiceCatchNode(c,b)}};g.parseTimerTrigger=function(a,b){if(a){var c=a.getAttribute("TimeDate"),d=a.getAttribute("EndDate");facilis.parsers.ParseInUtils.setSubNodeValue(b,"initdate",c);facilis.parsers.ParseInUtils.setSubNodeValue(b,
"enddate",d);if((c=facilis.parsers.ParseInUtils.getSubNode(b,"timerattribute"))&&c.firstElementChild&&c.firstElementChild.firstElementChild){c.firstElementChild.firstElementChild.setAttribute("value",a.getAttribute("TimerAttName"));facilis.parsers.ParseInUtils.setSubNodeValue(c,"name",a.getAttribute("TimerAttName"));facilis.parsers.ParseInUtils.setSubNodeValue(c,"id",a.getAttribute("TimerAttId"));c.setAttribute("value",a.getAttribute("TimerAttName"));facilis.parsers.ParseInUtils.setSubNodeValue(b,
"timerattributetype",a.getAttribute("TimerAttType"))}facilis.parsers.ParseInUtils.setSubNodeValue(b,"value",a.getAttribute("TimeCycle"));facilis.parsers.ParseInUtils.setSubNodeValue(b,"unit",a.getAttribute("TimeUnit"))}};g.parseConditionalTrigger=function(a,b){if(a){facilis.parsers.ParseInUtils.setSubNodeValue(b,"name",a.getAttribute("Name"));var c=facilis.parsers.ParseInUtils.getSubNode(a,"Expression");c&&facilis.parsers.ParseInUtils.setSubNodeValue(b,"expressionbody",c.firstElementChild.nodeValue)}};
g.parseSignalTrigger=function(a,b){a&&facilis.parsers.ParseInUtils.setSubNodeValue(b,"name",a.getAttribute("Name"))};g.parseMultipleTrigger=function(a,b){var c=facilis.parsers.ParseInUtils.getSubNode(b,"multimessage"),d=facilis.parsers.ParseInUtils.getSubNode(b,"multitimer");if(a)for(var e=0;e<a.children.length;e++)if(a.children[e].nodeName=="TriggerResultMessage")parseMessageTrigger(a.children[e],c);else a.children[e].nodeName=="TriggerTimer"&&parseTimerTrigger(a.children[e],d)};g.parseErrorTrigger=
function(a,b){a&&facilis.parsers.ParseInUtils.setSubNodeValue(b,"errorcode",a.getAttribute("ErrorCode"))};g.parseCompensationTrigger=function(a,b){if(a){var c=a.getAttribute("ActivityType");facilis.parsers.ParseInUtils.setSubNodeValue(b,"activitytype",c);c=="Task"?facilis.parsers.ParseInUtils.setSubNodeValue(b,"activityreftask",a.getAttribute("ActivityId")):facilis.parsers.ParseInUtils.setSubNodeValue(b,"activityrefsubproc",a.getAttribute("ActivityId"))}};g.parseMultiCompensationTrigger=function(a,
b){if(a){b=facilis.parsers.ParseInUtils.getSubNode(b,"activityref");var c=this.parsedNode.ownerDocument.createElement("values"),d='<value value="'+a.getAttribute("ActivityId")+'"><level name="name" value="'+a.getAttribute("ActivityId")+'" /><level name="type" value="'+a.getAttribute("ActivityType")+'" /></value>';b.setAttribute("value",a.getAttribute("ActivityId"));d=facilis.parsers.ParseInUtils.getParsedNode(d);c.appendChild(d);b.appendChild(c)}};facilis.parsers.input.Event=facilis.promote(k,"Activity")})();
(function(){function k(){this.ActivityElement_constructor();this.parseFunctions.push(this.getType);this.parseFunctions.push(this.getFormsRef);this.parseFunctions.push(this.getRoleRef);this.parseFunctions.push(this.getApiaTskEvents);this.parseFunctions.push(this.getApiaTskStates);this.parseFunctions.push(this.getTaskService);this.parseFunctions.push(this.getTaskUser);this.parseFunctions.push(this.getTaskSend);this.parseFunctions.push(this.getTaskReceive);this.parseFunctions.push(this.getTaskName);
this.parseFunctions.push(this.getApiaHighlightComments);this.parseFunctions.push(this.getTaskSchedule);this.parseFunctions.push(this.getSkipCondition);this.parseFunctions.push(this.getProEleId)}var g=facilis.extend(k,facilis.parsers.input.ActivityElement);g.getType=function(){var a=this.getToParseSubNode("Implementation");a&&a.firstElementChild&&a.firstElementChild.firstElementChild?this.setParsedSubNodeValue("taskType",a.firstElementChild.firstElementChild.localName.split("Task")[1]):this.setParsedSubNodeValue("taskType",
"None")};g.getFormsRef=function(){var a=this.getParsedSubNode("steps");if(a){var b=this.getToParseSubNode("FormsRef");if(b&&b.firstElementChild&&b.firstElementChild.nodeName!="Step"){for(var c=this.parsedNode.ownerDocument.createElement("FormsRef"),d=[],e=0;e<b.children.length;e++){var f=b.children[e].getAttribute("ProEleFrmStepId"),i=b.children[e].getAttribute("ProEleFrmOrder");d.push({order:f,frmOrder:i,form:b.children[e].cloneNode(true)})}d.sort(function(j,l){if(parseInt(j.order)==parseInt(l.order))return parseInt(j.frmOrder)-
parseInt(l.frmOrder);return parseInt(j.order)-parseInt(l.order)});f=null;for(e=e=i=0;e<d.length;e++){if(f!=d[e].order){for(var h=i+1;h<d[e].order;h++)c.appendChild(this.parsedNode.ownerDocument.createElement("Step"));i=parseInt(d[e].order);f=d[e].order;h=this.parsedNode.ownerDocument.createElement("Step");c.appendChild(h)}h.appendChild(d[e].form)}if(c.children.length>0)b=c}c=this.getData(a);d=this.parsedNode.ownerDocument.createElement("values");a.appendChild(d);if(b)for(a=0;a<b.children.length;a++){e=
parseStep(b.children[a],c);d.appendChild(e)}}};g.parseStep=function(a,b){var c,d=b.cloneNode(true),e,f;for(c=0;c<d.children.length;c++){console.log(c+": "+d.children[c].toString());if(d.children[c].getAttribute("Name")=="stepformse"||d.children[c].getAttribute("name")=="entityforms")console.log("stepformse en Task");else if(d.children[c].getAttribute("Name")=="stepformsp"||d.children[c].getAttribute("name")=="processforms"){e=d.children[c];console.log("stepformsp en Task")}}e.appendChild(pValues);
f=d.children[2];var i=this.parsedNode.ownerDocument.createElement("values");f.appendChild(i);d.nodeName="value";for(c=0;c<a.children.length;c++){var h;if(a.children[c].getAttribute("FrmType")=="E"){h=this.getData(f).cloneNode(true);i.appendChild(h)}else{h=this.getData(e).cloneNode(true);pValues.appendChild(h)}h.nodeName="value";facilis.parsers.ParseInUtils.setSubNodeValue(h,"id",a.children[c].getAttribute("FrmId"));facilis.parsers.ParseInUtils.setSubNodeValue(h,"name",a.children[c].getAttribute("FrmName"));
facilis.parsers.ParseInUtils.setSubNodeValue(h,"readonly",a.children[c].getAttribute("ProEleFrmReadOnly"));facilis.parsers.ParseInUtils.setSubNodeValue(h,"multiple",a.children[c].getAttribute("ProEleFrmMultiply"));if(a.children[c].getAttribute("ProEleFrmEvalCond")){var j=this.parsedNode.ownerDocument.createElement("values"),l=this.parsedNode.ownerDocument.createElement("value");j.appendChild(l);l.appendChild(this.parsedNode.ownerDocument.createTextNode(a.children[c].getAttribute("ProEleFrmEvalCond")));
(l=facilis.parsers.ParseInUtils.getSubNode(h,"condition"))&&l.appendChild(j)}if(a.children[c].getAttribute("ConditionDoc")){j=this.parsedNode.ownerDocument.createElement("values");l=this.parsedNode.ownerDocument.createElement("value");j.appendChild(l);l.appendChild(this.parsedNode.ownerDocument.createTextNode(a.children[c].getAttribute("ConditionDoc")));(h=facilis.parsers.ParseInUtils.getSubNode(h,"documentation"))&&h.appendChild(j)}}return d};g.getApiaTskPools=function(){var a=this.getParsedSubNode("groups"),
b=this.getData(a),c=this.getToParseSubNode("ApiaTskPools"),d=this.parsedNode.ownerDocument.createElement("values");a.appendChild(d);if(c)for(a=0;a<c.children.length;a++){var e=b.cloneNode(true);e.nodeName="value";d.appendChild(e);facilis.parsers.ParseInUtils.getSubNode(e,"id").setAttribute("value",c.children[a].getAttribute("PoolId"));facilis.parsers.ParseInUtils.getSubNode(e,"name").setAttribute("value",c.children[a].getAttribute("PoolName"));if(c.children[a].getAttribute("ProElePoolEvalCond")){var f=
this.parsedNode.ownerDocument.createElement("values"),i=this.parsedNode.ownerDocument.createElement("value");f.appendChild(i);i.appendChild(c.children[a].firstElementChild.cloneNode(true));facilis.parsers.ParseInUtils.getSubNode(e,"condition").appendChild(f)}}};g.getApiaTskStates=function(){var a=this.getParsedSubNode("taskstates");if(a){var b=this.getData(a),c=this.getToParseSubNode("ApiaTskStates"),d=this.parsedNode.ownerDocument.createElement("values");if(c){for(var e=0;e<c.children.length;e++){var f=
b.cloneNode(true);f.nodeName="value";f=parseApiaTskState(c.children[e],f);d.appendChild(f)}a.appendChild(d)}}};g.parseApiaTskState=function(a,b){facilis.parsers.ParseInUtils.getSubNode(b,"evtid").setAttribute("value",a.getAttribute("EvtId"));facilis.parsers.ParseInUtils.getSubNode(b,"clsid").setAttribute("value",a.getAttribute("EntStaId"));facilis.parsers.ParseInUtils.getSubNode(b,"evtname").setAttribute("value",a.getAttribute("EvtName"));facilis.parsers.ParseInUtils.getSubNode(b,"clsname").setAttribute("value",
a.getAttribute("StaName"));if(a.getAttribute("ProEleBusEntStaEvalCond")&&a.getAttribute("ProEleBusEntStaEvalCond")!=""){var c=a.getAttribute("ProEleBusEntStaEvalCond"),d=this.parsedNode.ownerDocument.createElement("values"),e=this.parsedNode.ownerDocument.createElement("value");d.appendChild(e);e.appendChild(this.parsedNode.ownerDocument.createTextNode(c));(c=facilis.parsers.ParseInUtils.getSubNode(b,"condition"))&&c.appendChild(d)}if(a.getAttribute("ConditionDoc")&&a.getAttribute("ConditionDoc")!=
""){c=a.getAttribute("ConditionDoc");d=this.parsedNode.ownerDocument.createElement("values");e=this.parsedNode.ownerDocument.createElement("value");d.appendChild(e);e.appendChild(this.parsedNode.ownerDocument.createTextNode(c));(c=facilis.parsers.ParseInUtils.getSubNode(b,"documentation"))&&c.appendChild(d)}return b};g.getApiaTskEvents=function(){var a=this.getParsedSubNode("bussinessclasses");if(a){var b=this.getToParseSubNode("ApiaEvents");parseEvents(b,a)}};g.getRoleRef=function(){var a=this.getParsedSubNode("role"),
b=this.getToParseSubNode("RoleRef");if(b&&a){var c=this.parsedNode.ownerDocument.createElement("values"),d=this.parsedNode.ownerDocument.createElement("value");c.appendChild(d);a.appendChild(c);c=this.parsedNode.ownerDocument.createElement("name");var e=this.parsedNode.ownerDocument.createElement("id");c.setAttribute("name","name");e.setAttribute("name","id");d.appendChild(e);d.appendChild(c);e.setAttribute("value",b.getAttribute("RoleId"));c.setAttribute("value",b.getAttribute("RoleName"));d.setAttribute("value",
b.getAttribute("RoleName"));a.setAttribute("value",b.getAttribute("RoleName"))}};g.getValues=function(a){for(var b=0;b<a.children.length;b++)if(a.children[b].nodeName=="values")return a.children[b]};g.getTaskService=function(){var a=this.getParsedSubNode("service"),b=this.getToParseSubNode("TaskService");if(b&&a){var c=facilis.parsers.ParseInUtils.getSubNode(b,"MessageIn"),d=facilis.parsers.ParseInUtils.getSubNode(b,"MessageOut"),e=facilis.parsers.ParseInUtils.getSubNode(a,"inmessageref");a=facilis.parsers.ParseInUtils.getSubNode(a,
"outmessageref");getMessage(c,e);getMessage(d,a);(b=facilis.parsers.ParseInUtils.getSubNode(b,"WebServiceMapping"))&&parseWebServiceCatchNode(b,e);parseWebServiceThrowNode(null,a)}};g.getTaskReceive=function(){var a=this.getParsedSubNode("receive"),b=this.getToParseSubNode("TaskReceive");if(b&&a){var c=facilis.parsers.ParseInUtils.getSubNode(a,"messageref"),d=facilis.parsers.ParseInUtils.getSubNode(b,"Message"),e=facilis.parsers.ParseInUtils.getSubNode(b,"WebServiceMapping");e&&parseWebServiceCatchNode(e,
c);getMessage(d,c);facilis.parsers.ParseInUtils.setSubNodeValue(a,"instantiate",b.getAttribute("Instantiate"))}};g.getTaskSend=function(){var a=this.getParsedSubNode("send"),b=this.getToParseSubNode("TaskSend");if(b&&a){var c=facilis.parsers.ParseInUtils.getSubNode(a,"messageref"),d=facilis.parsers.ParseInUtils.getSubNode(b,"Message"),e=facilis.parsers.ParseInUtils.getSubNode(b,"WebServiceMapping");e&&parseWebServiceCatchNode(e,c);e=facilis.parsers.ParseInUtils.getSubNode(a,"messageref");parseWebServiceThrowNode(null,
e);getMessage(d,c);facilis.parsers.ParseInUtils.setSubNodeValue(a,"instantiate",b.getAttribute("Instantiate"))}};g.getTaskUser=function(){var a=this.getParsedSubNode("user"),b=this.getToParseSubNode("TaskUser");if(a&&b){var c=facilis.parsers.ParseInUtils.getSubNode(b,"MessageIn"),d=facilis.parsers.ParseInUtils.getSubNode(b,"MessageOut"),e=facilis.parsers.ParseInUtils.getSubNode(a,"inmessageref");a=facilis.parsers.ParseInUtils.getSubNode(a,"outmessageref");getMessage(c,e);getMessage(d,a);(b=facilis.parsers.ParseInUtils.getSubNode(b,
"WebServiceMapping"))&&parseWebServiceCatchNode(b,e);parseWebServiceThrowNode(null,a)}};g.getTaskManual=function(){};g.getMessage=function(a,b){if(a){facilis.parsers.ParseInUtils.setSubNodeValue(b,"name",a.getAttribute("Name"));var c=facilis.parsers.ParseInUtils.getSubNode(b,"properties"),d=facilis.parsers.ParseInUtils.getSubNode(a,"Properties");parsePropertiesNode(d,c)}};g.getTaskName=function(){facilis.parsers.ParseInUtils.setSubNodeValue(this.parsedNode,"name",this.toParseNode.getAttribute("Name"));
facilis.parsers.ParseInUtils.setSubNodeValue(this.parsedNode,"nameChooser",this.toParseNode.getAttribute("Name"));if((TaskNode=this.getToParseSubNode("Task"))&&TaskNode.getAttribute("TskName")){var a=TaskNode.getAttribute("TskTitle")?TaskNode.getAttribute("TskTitle"):TaskNode.getAttribute("TskName"),b=TaskNode.getAttribute("TskName");facilis.parsers.ParseInUtils.setSubNodeValue(parsedNode,"name",a);facilis.parsers.ParseInUtils.setSubNodeValue(parsedNode,"tname",b);facilis.parsers.ParseInUtils.setSubNodeValue(parsedNode,
"nameChooser",TaskNode.getAttribute("TskName"));a='<values><value value="'+TaskNode.getAttribute("TskName")+'"><level name="id" value="'+TaskNode.getAttribute("TskId")+'" /><level name="name" value="'+b+'" /><level name="label" value="'+a+'" /></value></values>';a=facilis.parsers.ParseInUtils.getParsedNode(a);b=facilis.parsers.ParseInUtils.getSubNode(parsedNode,"nameChooser");b.getAttribute("value")=TaskNode.getAttribute("TskName");if(b){b.setAttribute("value",TaskNode.getAttribute("TskName"));var c=
facilis.parsers.ParseInUtils.getSubNode(b,"values");c&&c.removeNode();b.appendChild(a)}}};g.getApiaHighlightComments=function(){var a=this.getParsedSubNode("highlightcomments");TaskNode&&a&&a.setAttribute("value",TaskNode.getAttribute("highlight_comments"))};g.getTaskSchedule=function(){var a=this.getParsedSubNode("scheduledTask"),b=TaskNode;if(a&&b){a=a.firstElementChild.firstElementChild;for(var c=0;c<a.children.length;c++){a.children[c].getAttribute("name")=="tsk_sch_id"&&b.getAttribute("TskSchId")&&
a.children[c].setAttribute("value",b.getAttribute("TskSchId"));a.children[c].getAttribute("name")=="asgn_type"&&b.getAttribute("AsignType")&&a.children[c].setAttribute("value",b.getAttribute("AsignType"));a.children[c].getAttribute("name")=="active_tsk_id"&&b.getAttribute("ActiveTskId")&&a.children[c].setAttribute("value",b.getAttribute("ActiveTskId"));a.children[c].getAttribute("name")=="active_prc_id"&&b.getAttribute("ActivePrcId")&&a.children[c].setAttribute("value",b.getAttribute("ActivePrcId"));
a.children[c].getAttribute("name")=="active_prc_name"&&b.getAttribute("ActivePrcName")&&a.children[c].setAttribute("value",b.getAttribute("ActivePrcName"))}}};g.getSkipCondition=function(){var a=this.getParsedSubNode("skipcondition");if(TaskNode.getAttribute("SkipTskCond")){var b=this.parsedNode.ownerDocument.createElement("values"),c=this.parsedNode.ownerDocument.createElement("value"),d=TaskNode.getAttribute("SkipTskCond")+"";c.setAttribute("value",d);b.appendChild(c);c.appendChild(this.parsedNode.ownerDocument.createTextNode(d));
a.appendChild(b);a.setAttribute("value",c.getAttribute("value"))}};g.getProEleId=function(){var a=this.getParsedSubNode("proeleid");if(a)this.toParseNode.getAttribute("ProEleId")?a.setAttribute("value",this.toParseNode.getAttribute("ProEleId")):a.setAttribute("value",this.toParseNode.getAttribute("Id"))};facilis.parsers.input.Task=facilis.promote(k,"ActivityElement")})();
(function(){function k(){this.Activity_constructor()}var g=facilis.extend(k,facilis.parsers.input.Activity);g.startParse=function(){this.getWorkflowProcess();this.getDocumentation();this.getProcesClasses()};g.getWorkflowProcess=function(){var a=facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"processref");if(a){facilis.parsers.ParseInUtils.setSubNodeValue(a,"name",this.toParseNode.getAttribute("Name"));facilis.parsers.ParseInUtils.getSubNode(a,"performers");facilis.parsers.ParseInUtils.getSubNode(a,
"properties");facilis.parsers.ParseInUtils.getSubNode(a,"assignments");facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"Performers");facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"Properties");facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"Assignments");this.parsePerformersNode(this.Performers,this.performers);this.parsePropertiesNode(this.Properties,this.properties);this.parseAssignmentsNode(this.Assignments,this.assignments)}this.parseParticipants(facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,
"Participants"))};g.parseParticipants=function(a){if(a)for(var b=0;b<a.children.length;b++){var c=a.children[b];facilis.parsers.ParserIn.addParticipant(c.attributes.Id.value,c.attributes.Name.value)}};g.getProcesClasses=function(){var a=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"ApiaProEvents");if(a){var b=facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,"bussinessclasses");parseEvents(a,b)}};g.parseLaneEvents=function(a){if(a){var b=facilis.parsers.ParseInUtils.getSubNode(this.parsedNode,
"bussinessclasses");parseEvents(a,b)}};facilis.parsers.input.WorkflowProcess=facilis.promote(k,"Activity")})();
(function(){function k(){this.Line_constructor();this.parseFunctions.push(this.parseCondition);this.parseFunctions.push(this.parseType);this.parseFunctions.push(this.parseExecutionOrder)}var g=facilis.extend(k,facilis.parsers.input.Line);g.parseCondition=function(){var a=this.getToParseSubNode("Condition");a&&a.getAttribute("Type")&&this.setParsedSubNodeValue("conditiontype",a.getAttribute("Type"));var b=this.getParsedSubNode("conditionexpression");a=facilis.parsers.ParseInUtils.getSubNode(a,"Expression");
if(b&&a&&a.firstElementChild){var c=this.parsedNode.ownerDocument.createElement("values"),d=this.parsedNode.ownerDocument.createElement("value");d.getAttribute("value")=a.firstElementChild.toString();d.appendChild(a.firstElementChild.cloneNode(true));c.appendChild(d);b.appendChild(c)}b=this.getParsedSubNode("conditiondocumentation");a=this.toParseNode.getAttribute("ConditionDoc");if(!a){c=facilis.parsers.ParseInUtils.getSubNode(this.toParseNode,"Object");if(!c)c=this.toParseNode;for(d=0;d<c.children.length;d++)if(c.children[d].localName==
"Documentation"&&c.children[d].firstElementChild){a=c.children[d].firstElementChild.nodeValue;break}}if(b&&a){a=getParsedNode('<values><value value="'+a+'">'+a+"</value></values>");b.appendChild(a)}};g.parseType=function(){var a=this.getParsedSubNode("apiatype");if(a)if(this.toParseNode.getAttribute("Type")=="L")a.setAttribute("value","Loopback");else if(this.toParseNode.getAttribute("Type")=="W")a.setAttribute("value","Wizard");else this.toParseNode.getAttribute("Type")=="N"&&a.setAttribute("value",
"None")};g.parseExecutionOrder=function(){var a=this.getParsedSubNode("executionorder");if(a&&this.toParseNode.getAttribute("ExecutionOrder"))a.getAttribute("value")=this.toParseNode.getAttribute("ExecutionOrder")};facilis.parsers.input.Transition=facilis.promote(k,"Line")})();
